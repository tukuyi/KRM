foreign_politics = {

	china_join_the_internationale_decision = {
		icon = GFX_decision_trumpet
		priority = 150

		allowed = {
			OR = {
				original_tag = CHI
				original_tag = SHX
			}
		}

		available = {
			has_war = yes
			has_war_support > 0.75
			if = {
				limit = { original_tag = SHX }
				has_socialist_government = yes
				country_exists = RUS
				RUS = { has_socialist_government = yes }
			}
			count_triggers = {
				amount = 2
				has_war_with = GER
				has_war_with = ENT
				has_war_with = JAP
				has_war_with = RUS
				has_war_with = var:361.owner #Owner of Washington DC
			}
			all_enemy_country = { has_war_with = FROM }
		}

		visible = {
			is_in_faction = no
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
			china_is_the_unifier_of_china_trigger = yes
		}

		targets = { INT }
		target_root_trigger = {
			china_is_the_unifier_of_china_trigger = yes
			if = {
				limit = { tag = CHI }
				OR = {
					has_completed_focus = CHI_convene_the_peoples_congress
					has_completed_focus = CHI_empowering_the_presidential_camarilla
				}
			}
			else_if = {
				limit = { tag = SHX }
				has_completed_focus = SHX_from_china_to_world
			}
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 50 #PLACEHOLDER - Ai will take this decision if all conditions are met
			modifier = {
				factor = 0
				FROM = {
					OR = {
						any_owned_state = { china_is_chinese_core_or_claim_trigger = yes }
						any_allied_country = { any_owned_state = { china_is_chinese_core_or_claim_trigger = yes } }
					}
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_join_the_internationale_decision target: [From.GetName]"
			FROM = { country_event = china_events.401 } #China Seeks to Join the Internationale
			if = {
				limit = { tag = CHI }
				custom_effect_tooltip = CHI_join_int_decision_warning_tt
			}
		}
	}

	china_join_the_reichspakt_decision = {
		icon = GFX_decision_trumpet
		priority = 150

		allowed = {
			OR = {
				tag = LEP
				tag = SZC
				tag = SHX
				#QIE gets theirs separately
			}
		}

		available = {
			has_war = yes
			has_war_support > 0.75
			count_triggers = {
				amount = 2
				has_war_with = INT
				has_war_with = ENT
				has_war_with = JAP
				has_war_with = RUS
				has_war_with = var:361.owner #Owner of Washington DC
			}
			if = {
				limit = { tag = SHX }
				SHX_wang_xiang = { is_second_in_command = yes }
			}
			all_enemy_country = { has_war_with = FROM }
		}

		visible = {
			is_in_faction = no
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
			if = {
				limit = { tag = SZC }
				china_is_aligned_with_zhili = yes
			}
			else_if = {
				limit = { tag = SHX }
				has_completed_focus = SHX_statesman
			}
			china_is_the_unifier_of_china_trigger = yes
		}

		targets = { GER }
		target_root_trigger = {
			china_is_the_unifier_of_china_trigger = yes
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 50 #PLACEHOLDER - Ai will take this decision if all conditions are met
			modifier = {
				factor = 0
				GER = { any_allied_country = { is_tag_in_china_area = yes } }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_join_the_reichspakt_decision target: [From.GetName]"
			FROM = { country_event = china_events.404 } #China Seeks to Join the reichspakt
		}
	}
	china_join_the_moscow_accord_decision = {
		icon = GFX_decision_trumpet
		priority = 150

		allowed = {
			OR = {
				tag = SHX
				tag = HNN
				tag = GXC
				tag = YUN
			}
		}

		available = {
			has_war = yes
			has_war_support > 0.75
			if = {
				limit = { tag = SHX }
				has_government = authoritarian_democrat
			}
			owns_state = 330
			owns_state = 322
			owns_state = 617
			count_triggers = {
				amount = 2
				has_war_with = GER
				has_war_with = INT
				has_war_with = ENT
				has_war_with = JAP
				has_war_with = var:361.owner #Owner of Washington DC
			}
			all_enemy_country = { has_war_with = FROM }
		}

		visible = {
			is_in_faction = no
			OR = {
				has_country_leader = { character = SHX_feng_yuxiang }
				china_is_aligned_with_right_kmt = yes
			}
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
				has_socialist_government = no
			}
			china_is_the_unifier_of_china_trigger = yes
		}

		targets = { RUS }
		target_root_trigger = {
			china_is_the_unifier_of_china_trigger = yes
			if = {
				limit = { tag = SHX }
				has_completed_focus = SHX_from_china_to_world
			}
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 50 #PLACEHOLDER - Ai will take this decision if all conditions are met
			modifier = {
				factor = 0
				RUS = { any_allied_country = { is_tag_in_china_area = yes } }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_join_the_moscow_accord_decision target: [From.GetName]"
			FROM = { country_event = china_events.407 } #China Seeks to Join the MA
		}
	}
	china_join_the_co_pro_decision = {
		icon = GFX_decision_trumpet
		priority = 150

		allowed = {
			OR = {
				tag = SHX
				tag = GXC
			}
		}

		available = {
			has_war = yes
			has_war_support > 0.75
			count_triggers = {
				amount = 2
				has_war_with = INT
				has_war_with = ENT
				has_war_with = RUS
				has_war_with = var:361.owner #Owner of Washington DC
				has_war_with = GER
			}
			if = {
				limit = { tag = SHX }
				has_country_leader = { character = SHX_yan_xishan }
				SHX_komoto_daisaku = { is_second_in_command = yes }
				has_completed_focus = SHX_currying_international_exports_focus
			}
			all_enemy_country = { has_war_with = FROM }
		}

		visible = {
			is_in_faction = no
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
			if = {
				limit = { tag = SHX }
				has_completed_focus = SHX_statesman
				NOT = {
					has_completed_focus = SHX_a_revolutionary_republic_focus
					has_completed_focus = SHX_setting_the_groundwork_for_democracy_focus
					has_completed_focus = SHX_listen_to_independent_voices_focus
				}
			}
			else_if = {
				limit = { tag = GXC }
				has_country_leader = { character = GXC_chen_lianbo }
			}
			china_is_the_unifier_of_china_trigger = yes
		}

		targets = { JAP }
		target_root_trigger = {
			china_is_the_unifier_of_china_trigger = yes
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 50 #PLACEHOLDER - Ai will take this decision if all conditions are met
			modifier = {
				factor = 0
				JAP = { any_allied_country = { is_tag_in_china_area = yes } }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_join_the_co_pro_decision target: [From.GetName]"
			FROM = { country_event = china_events.410 } #China Seeks to Join the CoPro
		}
	}

	china_invite_countries_to_faction = {
		icon = generic_agreement

		allowed = { always = no }
		#Every China except the ones that use LKMT's special foreign policy decision menu will use this

		available = {
			AND = {
				at_peace_or_same_enemies_as_FROM = yes
				FROM = { at_peace_or_same_enemies_as_ROOT = yes }
			}
		}

		target_non_existing = yes
		visible = {
			is_faction_leader = yes
			FROM = {
				exists = yes
				is_subject = no
				has_capitulated = no
				if = {
					limit = {
						ROOT = { has_socialist_government = yes }
						NOT = { tag = INC } #Apparently Indochina will basically always be willing to align with Socialist China
					}
					has_socialist_government = yes
				}
				else = {
					has_socialist_government = no
				}
			}
		}
		cost = 10
		days_remove = 7
		fire_only_once = yes
		ai_will_do = { base = 500 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_invite_countries_to_faction target: [From.GetName]"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_invite_countries_to_faction target: [From.GetName]"
			custom_effect_tooltip = china_invite_countries_to_faction_tt
			FROM = { country_event = { id = china_events.425 days = 1 random_days = 3 } }
		}
	}
	northwest_conflict_surrender = {
		icon = generic_break_treaty
		allowed = {
			OR = {
				original_tag = XSM
				original_tag = TIB
				original_tag = MON
			}
		}

		available = {
			if = {
				limit = {
					original_tag = TIB
					MON = { has_country_flag = MON_defeated_in_northwest_war_flag }
					XSM = { is_ai = yes }
					TIB = { is_ai = yes }
					MON = { is_ai = yes }
				}
				surrender_progress > 0.15
			}
			else = {
				surrender_progress > 0.4
			}
		}

		visible = {
			has_global_flag = northwest_conflict_begun
			NOT = { has_global_flag = northwest_conflict_ended }
			OR = {
				has_war_with = XSM
				has_war_with = TIB
				has_war_with = MON
			}
			is_subject = no
			is_in_faction = no
			has_civil_war = no
		}

		fire_only_once = yes

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete northwest_conflict_surrender"
			add_ideas = has_scripted_peace
			if = {
				limit = {
					original_tag = XSM
				}
				if = {
					limit = {
						NOT = { has_war_with = MON }
					}
					log = "KR_Event_Logging;NORTHWESTERN WAR RESULT - Tibet (Mongolia lost to XSM);[GetDateText]"
				}
				else_if = {
					limit = {
						NOT = { has_war_with = TIB }
					}
					log = "KR_Event_Logging;NORTHWESTERN WAR RESULT - Mongolia (Tibet lost to XSM);[GetDateText]"
				}
				else = {
					log = "KR_Event_Logging;NORTHWESTERN WAR RESULT - Mongolia and Tibet;[GetDateText]"
				}
				every_enemy_country = {
					limit = {
						OR = {
							tag = TIB
							tag = MON
						}
						is_valid_peace_target = yes
					}
					country_event = { id = mac.226 }
				}
			}
			else = {
				if = {
					limit = {
						OR = {
							AND = {
								tag = TIB
								NOT = { XSM = { has_war_with = MON } }
							}
							AND = {
								tag = MON
								NOT = { XSM = { has_war_with = TIB } }
							}
						}
					}
					log = "KR_Event_Logging;NORTHWESTERN WAR RESULT - Ma Clique;[GetDateText]"
				}
				XSM = { country_event = mac.230 }
			}
		}
	}
}

political_actions = {
	LEC_china_peace = {
		icon = generic_agreement

		allowed = {
			is_chinese_tag = yes
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = LEC_at_war_for_six_months_tooltip
				has_country_flag = { flag = LEC_war days > 180 }
			}
			custom_trigger_tooltip = {
				tooltip = LEC_controlled_by_council_backer_tooltip
				NOT = {
					any_owned_state = {
						controller = { has_country_flag = LEC_war_backer }
					}
				}
			}
		}

		visible = {
			has_country_flag = LEC_war
			any_enemy_country = { has_country_flag = LEC_war_backer }
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete LEC_china_peace"
			country_event = lec.93
		}

		ai_will_do = { base = 100 }
	}
}

@china_attack_decision_cost = 20
@china_attack_decision_time = 30

chinese_unification = {
	china_create_united_front = {
		icon = generic_civil_support
		priority = 100

		allowed = {
			NOT = { original_tag = FNG }
			NOT = { original_tag = KUM } #manually activated by KUM_set_as_chinese_tag
		}

		available = {
			OR = {
				JAP = {
					has_war_with = ROOT
					is_major = yes
					is_subject = no
				}
				AND = {
					has_defensive_war = yes
					any_enemy_country = {
						is_major = yes
						num_of_controlled_factories > 50
						has_offensive_war_with = ROOT
						is_subject = no
						hidden_trigger = { is_chinese_tag = no }
					}
				}
			}
		}

		visible = {
			has_war_with_major = yes
			has_civil_war = no
			NOT = { has_event_target = china_united_front_leader }
			NOT = { has_global_flag = china_united }
			NOT = { has_global_flag = china_united_front_defeated }
			is_subject = no
			is_in_faction = no
			is_working_with_JAP = no
			if = {
				limit = { original_tag = KUM }
				OR = {
					has_country_leader = { character = SIK_fan_yaonan }
					has_country_leader = { character = XSM_ma_zhongying }
				}
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = { factor = 1000 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_create_united_front"
			save_global_event_target_as = china_united_front_leader
			create_faction = chinese_united_front
			set_country_flag = was_in_united_front
			set_rule = {
				can_not_declare_war = yes
				desc = china_cannot_declare_war_while_in_united_front
			}
			every_other_country = {
				limit = {
					is_chinese_tag = yes
					is_in_faction = no
				}
				set_country_flag = china_united_front_can_join_factions
				set_rule = { can_join_factions = yes }
			}
			if = {
				limit = {
					has_dlc_lar = yes
					NOT = { has_global_flag = CHN_zheng_pingru_recruited_flag }
					has_war_with = JAP
				}
				create_operative_leader = {
					name = CHN_zheng_pingru
					GFX = GFX_portrait_CHN_zheng_pingru_operative
					traits = {
						operative_seducer
						operative_well_groomed
						operative_political_connections
					}
					bypass_recruitment = no
					available_to_spy_master = yes
					nationalities = { JAP LEC QIE FNG CHI LEP ANQ HNN GXC YUN SZC SHX SHD XSM SIK KUM }
				}
				set_global_flag = CHN_zheng_pingru_recruited_flag
			}
			hidden_effect = {
				every_other_country = {
					limit = {
						is_chinese_tag = yes
						is_ai = no
					}
					country_event = china_events.25
				}
				news_event = { id = china_events.26 days = 5 }
				SHX = { country_event = { id = shx_zhifeng.106 days = 30 } } #A War of Resistance - give it some time so the player has a chance to join the CUF
			}
		}
	}
	FNG_create_united_front = { #unique version for FNG due to different conditions
		name = china_create_united_front
		icon = generic_civil_support
		priority = 100

		allowed = {
			original_tag = FNG
		}

		available = {
			OR = {
				has_country_leader = { character = FNG_zhang_xueliang }
				has_global_flag = FNG_conference_success
			}
			has_defensive_war = yes
			surrender_progress > 0.4
			any_enemy_country = {
				is_major = yes
				num_of_controlled_factories > 50
				has_offensive_war_with = ROOT
				is_subject = no
				hidden_trigger = { is_chinese_tag = no }
			}
		}

		visible = {
			has_war_with_major = yes
			has_civil_war = no
			NOT = { has_event_target = china_united_front_leader }
			NOT = { has_country_flag = FNG_collaborated_with_japan }
			NOT = { has_global_flag = JAP_defeated_by_china }
			NOT = { has_global_flag = china_united }
			is_subject = no
			is_in_faction = no
			is_working_with_JAP = no
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = { factor = 1000 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete FNG_create_united_front"
			save_global_event_target_as = china_united_front_leader
			create_faction = chinese_united_front
			set_country_flag = was_in_united_front
			set_rule = {
				can_not_declare_war = yes
				desc = china_cannot_declare_war_while_in_united_front
			}
			every_other_country = {
				limit = {
					is_chinese_tag = yes
					is_in_faction = no
				}
				set_country_flag = china_united_front_can_join_factions
				set_rule = { can_join_factions = yes }
			}
			if = {
				limit = {
					has_dlc_lar = yes
					NOT = { has_global_flag = CHN_zheng_pingru_recruited_flag }
					has_war_with = JAP
				}
				create_operative_leader = {
					name = CHN_zheng_pingru
					GFX = GFX_portrait_CHN_zheng_pingru_operative
					traits = {
						operative_seducer
						operative_well_groomed
						operative_political_connections
					}
					bypass_recruitment = no
					available_to_spy_master = yes
					nationalities = { JAP LEC QIE FNG CHI LEP ANQ HNN GXC YUN SZC SHX SHD XSM SIK KUM }
				}
				set_global_flag = CHN_zheng_pingru_recruited_flag
			}
			hidden_effect = {
				every_other_country = {
					limit = {
						is_chinese_tag = yes
						is_ai = no
					}
					country_event = china_events.25
				}
				news_event = { id = china_events.26 days = 5 }
				SHX = { country_event = { id = shx_zhifeng.106 days = 30 } } #A War of Resistance - give it some time so the player has a chance to join the CUF
			}
		}
	}
	china_offer_ceasefire = {
		icon = generic_civil_support
		priority = 100

		allowed = {
			NOT = { original_tag = KUM }
		}

		visible = {
			has_war_with = FROM
			is_valid_peace_target = yes
			NOT = { has_country_flag = china_refused_ceasefire }
			is_working_with_JAP = no
			NOT = { has_country_flag = FNG_collaborated_with_japan }
			FROM = {
				is_valid_peace_target = yes
				has_capitulated = no
				NOT = { has_country_flag = china_refused_ceasefire }
				is_working_with_JAP = no
			}
		}

		target_array = global.china_tags_array
		target_root_trigger = {
			has_event_target = china_united_front_leader
			is_valid_peace_target = yes
			NOT = { has_country_flag = china_refused_ceasefire }
			is_working_with_JAP = no
			NOT = { has_country_flag = FNG_collaborated_with_japan }
		}
		target_trigger = {
			has_war_with = FROM
			FROM = {
				is_valid_peace_target = yes
				has_capitulated = no
				NOT = { has_country_flag = china_refused_ceasefire }
				NOT = { has_country_flag = FNG_collaborated_with_japan }
				is_working_with_JAP = no
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				has_offensive_war_with = FROM
				surrender_progress < 0.01
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_offer_ceasefire target: [From.GetName]"
			FROM = { country_event = china_events.27 }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = { start_peace_conference = { tag = FROM score_factor = 0 } }
		}
	}
	china_declare_government = {
		icon = generic_speech

		allowed = {
			NOT = { original_tag = KUM } #manually activated by KUM_set_as_chinese_tag
		}

		available = {
			is_subject = no
			has_civil_war = no
			num_of_controlled_factories > 10
			has_army_manpower = { size > 300000 }
			if = {
				limit = {
					OR = {
						has_country_leader = { character = SHD_zhang_tianran }
						AND = {
							has_country_leader = { character = SHD_qu_yingguang }
							check_variable = { country_leader:china_alignment = token:manchu_qing }
						}
					}
				}
				owns_state = 608 #Beijing
			}
			else = {
				OR = {
					owns_state = 608 #Beijing
					china_stronger_than_existing_governments = yes
				}
			}
			if = {
				limit = {
					has_country_leader = { character = SHD_zhang_tianran }
					check_variable = { country_leader:china_alignment = token:northern_zhili }
				}
				OR = {
					NOT = { QIE = { has_country_leader = { character = QIE_aisin_gioro_puyi } } }
					NOT = { country_exists = QIE }
				}
			}
			else = {
				CHN_no_aligned_unifier_exists_trigger = yes
			}
		}

		visible = {
			china_is_potential_government = no
		}

		cost = 75
		fire_only_once = yes

		ai_will_do = {
			factor = 0
			modifier = {
				factor = 0
				any_of_scopes = {
					array = global.china_tags_array
					china_is_potential_government = yes
					exists = yes
					china_compatible_alignment_to_PREV = yes
				}
			}
			modifier = {
				factor = 0
				china_is_aligned_with_zhili = yes
				SZC = {
					exists = yes
					is_subject = no
					china_is_aligned_with_zhili = yes #will turn into exiled Zhili
				}
			}
			modifier = {
				add = 100
				OR = {
					owns_state = 608 #Beijing
					owns_state = 613 #Nanjing
				}
			}
			modifier = {
				add = 50
				OR = {
					owns_state = 592 #Guangzhou
					owns_state = 1048 #Wuhan
				}
			}
			modifier = {
				add = 25
				OR = {
					owns_state = 650 #Chongqing
					owns_state = 325 #Kunming
				}
			}
			modifier = {
				factor = 20
				NOT = {
					any_of_scopes = {
						array = global.china_tags_array
						china_is_potential_government = yes
						exists = yes
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						tag = ANQ
						NOT = { has_game_rule = { rule = ANQ_forpol option = DEFAULT } }
						NOT = { has_game_rule = { rule = ANQ_forpol option = ANQ_FORPOL_ANQ } }
					}
					AND = {
						tag = GXC
						NOT = { has_game_rule = { rule = GXC_forpol option = DEFAULT } }
						NOT = { has_game_rule = { rule = GXC_forpol option = GXC_FORPOL_GXC } }
						NOT = { has_game_rule = { rule = GXC_forpol option = GXC_FORPOL_FORM_NPA } }
					}
					AND = {
						tag = LEP
						NOT = { has_game_rule = { rule = LEP_forpol option = DEFAULT } }
						NOT = { has_game_rule = { rule = LEP_forpol option = LEP_FORPOL_LEP } }
					}
					AND = {
						tag = SHX
						NOT = { has_game_rule = { rule = SHX_forpol option = DEFAULT } }
						NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_SHX } }
					}
					AND = {
						tag = SHD
						NOT = { has_game_rule = { rule = SHD_forpol option = DEFAULT } }
						NOT = { has_game_rule = { rule = SHD_forpol option = SHD_FORPOL_SHD } }
					}
					AND = {
						tag = SZC
						NOT = { has_game_rule = { rule = SZC_forpol option = DEFAULT } }
						NOT = { has_game_rule = { rule = SZC_forpol option = SZC_FORPOL_SZC } }
						NOT = { has_game_rule = { rule = SZC_forpol option = SZC_FORPOL_FORM_NPA } }
					}
					AND = {
						tag = YUN
						NOT = { has_game_rule = { rule = YUN_forpol option = DEFAULT } }
						NOT = { has_game_rule = { rule = YUN_forpol option = YUN_FORPOL_FORM_NPA } }
					}
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_declare_government"
			set_potential_national_government = yes
			if = {
				limit = { NOT = { original_tag = SHX } } #has tag-side content
				china_enable_alliances_decisions = yes
			}
			china_enable_all_demand_submission_decisions = yes
			if = {
				limit = {
					OR = {
						original_tag = KUM
						original_tag = SIK
					}
				}
				activate_targeted_decision = { target = XSM decision = china_demand_submission }
			}
		}
	}
	china_declare_unification = {
		icon = generic_form_nation

		allowed = {
			NOT = { original_tag = KUM } #manually activated by KUM_set_as_chinese_tag
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = china_no_rival_governments_left_tt
				china_no_rival_governments_left = yes
			}
			custom_trigger_tooltip = {
				tooltip = china_is_CHN_tt
				tag = CHN
			}
			if = {
				limit = {
					original_tag = FNG
				}
				OR = {
					has_completed_focus = FNG_The_Question_of_the_Presidency
					has_completed_focus = FNG_Restore_1923_Constitution
				}
				if = {
					limit = {
						FNG_JAP_hostile = no
					}
					AND = {
						592 = { owner = { is_ally_with = ROOT } }
						608 = { owner = { is_ally_with = ROOT } }
						613 = { owner = { is_ally_with = ROOT } }
						650 = { owner = { is_ally_with = ROOT } }
						716 = { owner = { is_ally_with = ROOT } }
						1048 = { owner = { is_ally_with = ROOT } }
					}
				}
				else = {
					custom_trigger_tooltip = {
						tooltip = china_states_required_tt
						592 = { is_owned_by_ROOT_or_subject = yes } #Guangzhou
						608 = { is_owned_by_ROOT_or_subject = yes } #Beijing
						613 = { is_owned_by_ROOT_or_subject = yes } #Nanjing
						650 = { is_owned_by_ROOT_or_subject = yes } #Chongqing
						716 = { is_owned_by_ROOT_or_subject = yes } #Shenyang
						1048 = { is_owned_by_ROOT_or_subject = yes } #Wuhan
					}
				}
			}
			else_if = {
				limit = {
					is_subject = yes
				}
				AND = {
					592 = { owner = { is_ally_with = ROOT } }
					608 = { owner = { is_ally_with = ROOT } }
					613 = { owner = { is_ally_with = ROOT } }
					650 = { owner = { is_ally_with = ROOT } }
					716 = { owner = { is_ally_with = ROOT } }
					1048 = { owner = { is_ally_with = ROOT } }
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = china_states_required_tt
					592 = { is_owned_by_ROOT_or_subject = yes } #Guangzhou
					608 = { is_owned_by_ROOT_or_subject = yes } #Beijing
					613 = { is_owned_by_ROOT_or_subject = yes } #Nanjing
					650 = { is_owned_by_ROOT_or_subject = yes } #Chongqing
					716 = { is_owned_by_ROOT_or_subject = yes } #Shenyang
					1048 = { is_owned_by_ROOT_or_subject = yes } #Wuhan
				}
			}
			surrender_progress < 0.05
			#if = {
			#	limit = {
			#		OR = {
			#			tag = NPA
			#			has_global_flag = NPA_revolt
			#		}
			#	}
			#	has_global_flag = NPA_secured
			#}
			OR = {
				NOT = { has_war_with = JAP }
				JAP = { has_capitulated = yes }
			}
			NOT = {
				has_wargoal_against = JAP
				is_justifying_wargoal_against = JAP
				JAP = { has_wargoal_against = ROOT }
				JAP = { is_justifying_wargoal_against = ROOT }
				any_home_area_neighbor_country = {
					OR = {
						AND = {
							has_war_with = ROOT
							has_capitulated = no
						}
						AND = {
							has_wargoal_against = ROOT
							can_declare_war_on = ROOT
						}
					}
				}
			}
		}

		visible = {
			china_is_potential_government = yes
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = { factor = 1000 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_declare_unification"
			set_global_flag = china_united
			if = {
				limit = { original_tag = QIE }
				if = {
					limit = { has_global_flag = QIE_manchu_restoration }
					set_cosmetic_tag = united_china_manchu
					log = "KR_Event_Logging;CHINA UNITED BY Manchu Qing;[GetDateText]"
					hidden_effect = { news_event = china_events.300 }
				}
				else_if = {
					limit = { has_country_leader = { character = QIE_aisin_gioro_puyi } }
					set_cosmetic_tag = united_china_qing
					log = "KR_Event_Logging;CHINA UNITED BY Zhili Qing;[GetDateText]"
					hidden_effect = { news_event = china_events.301 }
					if = {
						limit = { has_country_flag = QIE_anti_concessionist_policy }
						country_event = qiedom.100 #Cao Resigns, mysteriously
					}
					else = {
						country_event = qiedom.19 #Cao Resigns, triumphantly
					}
				}
				else = {
					set_cosmetic_tag = ZHL_united_china
					log = "KR_Event_Logging;CHINA UNITED BY Zhili Republic;[GetDateText]"
					hidden_effect = { news_event = china_events.302 }
				}
			}
			else_if = {
				limit = { original_tag = FNG }
				if = {
					limit = { has_government = market_liberal }
					set_cosmetic_tag = FNG_JAP_united_china
					log = "KR_Event_Logging;CHINA UNITED BY Japan (FNG is a puppet);[GetDateText]"
					hidden_effect = { news_event = china_events.304 }
				}
				else_if = {
					limit = { is_in_faction_with = JAP }
					set_cosmetic_tag = united_china
					log = "KR_Event_Logging;CHINA UNITED BY Japan (FNG is ally);[GetDateText]"
					hidden_effect = { news_event = china_events.303 }
				}
				else_if = {
					limit = { has_global_flag = FNG_conference_success }
					set_cosmetic_tag = united_china
					log = "KR_Event_Logging;CHINA UNITED BY Fengtian alone (Successful Unification Conference);[GetDateText]"
					hidden_effect = { news_event = china_events.303 }
				}
				else_if = {
					limit = { FNG_JAP_hostile = no }
					set_cosmetic_tag = united_china
					log = "KR_Event_Logging;CHINA UNITED BY Fengtian alone (Japan not hostile);[GetDateText]"
					hidden_effect = { news_event = china_events.303 }
				}
				else = {
					set_cosmetic_tag = united_china
					log = "KR_Event_Logging;CHINA UNITED BY Fengtian alone (Japan hostile);[GetDateText]"
					hidden_effect = { news_event = china_events.303 }
				}
			}
			else_if = {
				limit = { original_tag = SHX }
				set_cosmetic_tag = united_china
				log = "KR_Event_Logging;CHINA UNITED BY Shanxi;[GetDateText]"
				activate_targeted_decision = { decision = china_move_capital target = ROOT }
				hidden_effect = {
					if = {
						limit = { has_country_leader = { character = SHX_feng_yuxiang } }
						log = "KR_Event_Logging;SHX Game Progression - Feng Yuxiang, Any Path, United China;[GetDateText]"
						news_event = china_events.306
					}
					else = {
						log = "KR_Event_Logging;SHX Game Progression - Yan Xishan, Any Path, United China;[GetDateText]"
						news_event = china_events.305
					}
				}
			}
			else_if = {
				limit = { original_tag = SHD }
				if = {
					limit = {
						has_cosmetic_tag = SHD_government_yiguandao
					}
					log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
					set_cosmetic_tag = united_china_yiguandao
					add_research_slot_until_five = yes
					hidden_effect = { news_event = china_events.307 }
				}
				else_if = {
					limit = {
						has_cosmetic_tag = QIE_government_manchu
					}
					log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
					set_cosmetic_tag = united_china_manchu
					add_research_slot_until_five = yes
					hidden_effect = { news_event = china_events.300 }
				}
				else_if = {
					limit = {
						has_country_leader = { character = SHD_qu_yingguang }
						check_variable = { country_leader:china_alignment = token:northern_zhili }
					}
					log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
					set_cosmetic_tag = ZHL_united_china
					add_ideas = CHS_legitimacy1
					add_ideas = CHS_bureaucracy1
					add_ideas = CHS_military1
					activate_targeted_decision = { decision = china_move_capital target = ROOT }
					hidden_effect = { news_event = china_events.314 }
				}
				else_if = {
					limit = {
						has_country_leader = { character = SHD_zhang_zongchang }
						check_variable = { country_leader:china_alignment = token:fengtian }
					}
					log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
					set_cosmetic_tag = AGJ_united_china
					add_ideas = CHS_legitimacy1
					add_ideas = CHS_bureaucracy1
					add_ideas = CHS_military1
					activate_targeted_decision = { decision = china_move_capital target = ROOT }
					hidden_effect = { news_event = china_events.314 }
				}
				else = {
					china_generic_unification_effect = yes
					log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
					news_event = china_events.314
				}
			}
			else_if = {
				limit = { original_tag = LEP }
				log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
				china_generic_unification_effect = yes
				hidden_effect = { news_event = china_events.315 }
			}
			else_if = {
				limit = {
					check_variable = { country_leader:china_alignment = token:chinese_southern_republican }
				}
				log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
				china_generic_unification_effect = yes
				hidden_effect = { news_event = china_events.314 }
			}
			else_if = {
				limit = {
					OR = {
						check_variable = { country_leader:china_alignment = token:left_kuomintang }
						check_variable = { country_leader:china_alignment = token:right_kuomintang }
					}
				}
				if = {
					limit = { original_tag = CHI }
					country_event = CHI.lategame.200 #The White Sun Rises
					effect_tooltip = {
						add_ideas = CHI_calls_for_congress_idea
					}
					set_cosmetic_tag = KMT_united_china
					log = "KR_Event_Logging;CHINA UNITED BY Left-KMT;[GetDateText]"
					hidden_effect = { news_event = china_events.308 }
				}
				else_if = {
					limit = { check_variable = { country_leader:china_alignment = token:left_kuomintang } }
					set_cosmetic_tag = LKT_united_china
					log = "KR_Event_Logging;CHINA UNITED BY Left-KMT;[GetDateText]"
					hidden_effect = { news_event = china_events.308 }
					add_ideas = GXC_kmt_demobilisation
					add_ideas = GXC_economic_instability
					if = {
						limit = { has_country_leader = { character = GXC_chen_mingshu } }
						remove_ideas = GXC_RKMT_appeased_merchants
					}
					else = {
						add_ideas = KR_RKMT_popular_support_1
					}
					custom_effect_tooltip = enables_new_focus_branches
					activate_targeted_decision = { decision = china_move_capital target = ROOT }
				}
				else = {
					set_cosmetic_tag = RKT_united_china
					log = "KR_Event_Logging;CHINA UNITED BY Right-KMT;[GetDateText]"
					hidden_effect = { news_event = china_events.309 }
					activate_targeted_decision = { decision = china_move_capital target = ROOT }
					if = {
						limit = {
							NOT = { has_country_leader = { character = GXC_li_zongren } }
						}
						add_ideas = GXC_kmt_demobilisation
						add_ideas = GXC_economic_instability
						add_ideas = KR_RKMT_popular_support_1
						custom_effect_tooltip = enables_new_focus_branches
					}
				}
			}
			else_if = {
				limit = { check_variable = { country_leader:china_alignment = token:federalists } }
				if = {
					limit = { has_country_leader = { character = GXC_chen_jiongming } }
					if = {
						limit = { has_focus_tree = Sichuan_Clique_Federalist }
						log = "KR_Event_Logging;CHINA UNITED BY Sichuanese Exiles;[GetDateText]"
						hidden_effect = { news_event = china_events.312 }
					}
					else = {
						log = "KR_Event_Logging;CHINA UNITED BY Federalists;[GetDateText]"
						hidden_effect = { news_event = china_events.310 }
					}
					setup_federalist_china = yes
					activate_targeted_decision = { decision = china_move_capital target = ROOT }
				}
				else = {
					log = "KR_Event_Logging;CHINA UNITED BY Federalists;[GetDateText]"
					set_cosmetic_tag = UPC_united_china
					add_ideas = CHS_legitimacy1
					add_ideas = CHS_bureaucracy1
					add_ideas = CHS_military1
					activate_targeted_decision = { decision = china_move_capital target = ROOT }
					hidden_effect = {
						news_event = china_events.310
						country_event = { id = lngupc.8 days = 5 }
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { country_leader:china_alignment = token:beiyang }
				}
				log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
				china_generic_unification_effect = yes
				hidden_effect = { news_event = china_events.314 }
			}
			else_if = {
				limit = {
					check_variable = { country_leader:china_alignment = token:northern_zhili }
				}
				set_cosmetic_tag = ZHL_united_china
				if = {
					limit = {
						SZC_zhili_in_exile = yes
					}
					log = "KR_Event_Logging;CHINA UNITED BY Sichuanese Exiles;[GetDateText]"
					hidden_effect = { news_event = china_events.311 }
				}
				else = {
					log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
					add_ideas = CHS_legitimacy1
					add_ideas = CHS_bureaucracy1
					add_ideas = CHS_military1
					hidden_effect = { news_event = china_events.314 }
				}
				activate_targeted_decision = { decision = china_move_capital target = ROOT }
			}
			else_if = {
				limit = { #Qi Xieyuan and Ma Ji
					check_variable = { country_leader:china_alignment = token:southern_zhili }
				}
				log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
				set_cosmetic_tag = SZH_united_china
				add_ideas = CHS_legitimacy1
				add_ideas = CHS_bureaucracy1
				add_ideas = CHS_military1
				activate_targeted_decision = { decision = china_move_capital target = ROOT }
				hidden_effect = { news_event = china_events.314 }
			}
			else_if = {
				limit = { check_variable = { country_leader:china_alignment = token:fengtian } }
				log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
				set_cosmetic_tag = AGJ_united_china
				add_ideas = CHS_legitimacy1
				add_ideas = CHS_bureaucracy1
				add_ideas = CHS_military1
				activate_targeted_decision = { decision = china_move_capital target = ROOT }
				hidden_effect = { news_event = china_events.314 }
			}
			else_if = {
				limit = {
					original_tag = HNN
					check_variable = { country_leader:china_alignment = token:CHNsyndicalist }
				}
				log = "KR_Event_Logging;CHINA UNITED BY HNN syndicalist;[GetDateText]"
				hidden_effect = { news_event = china_events.314 }
				country_event = { id = hungong.29 }
			}
			else_if = {
				limit = { 
					original_tag = SHC
				}
				log = "KR_Event_Logging;CHINA UNITED BY Shanghai;[GetDateText]"
				activate_targeted_decision = { decision = china_move_capital target = ROOT }
				hidden_effect = { news_event = china_events.314 }
				if = {
					limit = {
						has_country_leader = { character = SHC_victor_sassoon ruling_only = yes }
						NOT = { has_completed_focus = LEC_zhong_cheng_de_shang_hai }
					}
					set_cosmetic_tag = SHC_YTC
				}
				else_if = {
					limit = {
						has_country_leader = { character = SHC_pavel_milf ruling_only = yes }
					}
					set_cosmetic_tag = LEC_PRC
				}
				else_if = {
					limit = {
						has_country_leader = { character = LEC_robert_hotung ruling_only = yes }
						NOT = { has_completed_focus = LEC_zhong_cheng_de_shang_hai }
					}
					set_cosmetic_tag = LEC_HD_Z
					hidden_effect = {
						country_event = {
							id = leche.14
						}
					}
				}
				else_if = {
					limit = {
						has_completed_focus = LEC_zhong_cheng_de_shang_hai
					}
					set_cosmetic_tag = LEC_CHD_Y
					hidden_effect = {
						country_event = {
							id = leche.15
						}
					}

				}
				else_if = {
					limit = {
						has_completed_focus = LEC_shang_di_de_huai_bao
					}
					set_cosmetic_tag = LEC_TZ_T
					hidden_effect = {
						country_event = {
							id = lecjidu.8
						}
					}
				}
				else_if = {
					limit = {
						has_completed_focus = SHC_jing_cha_sha_chu_cong_wei
						NOT = {
							has_country_flag = han_jian_victory
						}
					}
					set_cosmetic_tag = LEC_HD_Z
					hidden_effect = {
						country_event = {
							id = Shcjingcha.13
						}
					}
				}
				else_if = {
					limit = { 
						OR = {
							has_completed_focus = LEC_lu_xun_zhu_xi
							has_completed_focus = LEC_qing_xi_cheng_shi_xi_jun
						}
					}
					set_cosmetic_tag = LEC_GT_C
					hidden_effect = {#女权有，但不是现在
						country_event = {
							id = lecgong.14
						}
					}
				}
				else_if = {
					limit = { 
						has_country_leader = { character = SHC_peng_shuzhi ruling_only = yes }
					}
					hidden_effect = {
						set_cosmetic_tag = LEC_GTT_C
					}
				}
			}
			else_if = {
				limit = { check_variable = { country_leader:china_alignment = token:CHNsyndicalist } }
				log = "KR_Event_Logging;CHINA UNITED BY CHN syndicalist;[GetDateText]"
				activate_targeted_decision = { decision = china_move_capital target = ROOT }
				hidden_effect = { news_event = china_events.314 }
				
			}
			else = {
				log = "KR_Event_Logging;CHINA UNITED BY A minor clique;[GetDateText]"
				china_generic_unification_effect = yes
				hidden_effect = {
					if = {
						limit = { has_country_leader = { character = SZC_liu_xiang } }
						news_event = china_events.313
					}
					else = {
						news_event = china_events.314
					}
				}
			}
			mark_focus_tree_layout_dirty = yes
			if = {
				limit = { NOT = { tag = CHI } } #Has tagside content for this
				if = {
					limit = { tag = QIE } #QIE receives a unique spirit
					add_timed_idea = {
						idea = QIE_united_china_idea
						days = 365
					}
				}
				else = {
					add_timed_idea = {
						idea = unite_china_justification_idea
						days = 365
					}
				}
				china_generic_land_reform_setup = yes
			}
			hidden_effect = {
				if = {
					limit = { is_subject = no }
					every_other_country = {
						limit = {
							is_chinese_tag = yes
							NOT = { is_subject_of = ROOT }
							NOT = { tag = SIK } #Handled by china_enable_outskirts_decisions
							NOT = { tag = KUM } #Handled by china_enable_outskirts_decisions
							NOT = { tag = XSM } #Handled by china_enable_outskirts_decisions
						}
						add_to_array = { ROOT.china_possible_targets_array = THIS }
					}
				}
				if = {
					limit = {
						NOT = { has_country_leader = { character = GXC_chen_jiongming } }
						NOT = { has_country_leader = { character = GXC_li_zongren } }
						NOT = { original_tag = QIE }
						NOT = { original_tag = CHI }
						NOT = { original_tag = SHX }
						SZC_zhili_in_exile = no
					}
					china_enable_outskirts_decisions = yes
					china_enable_concession_decisions = yes
				}
				if = {
					limit = {
						HNN = { is_subject_of = ROOT }
					}
					if = {
						limit = { HNN = { has_country_leader = { character = HNN_zhao_hengti } } }
						HNN = { country_event = { id = hnn.121 } }
					}
					else_if = {
						limit = { HNN = { has_country_leader = { character = HNN_tang_xiangming } } }
						HNN = { country_event = { id = hnn.122 } }
					}
					else_if = {
						limit = { HNN = { has_country_leader = { character = HNN_tang_shengzhi } } }
						HNN = { country_event = { id = hnn.120 } }
					}
					else = {
						HNN = { country_event = { id = hnn.119 } }
					}
				}

				#Power Projection event for RUS
				RUS = { country_event = { id = rusfor.262 days = 5 random_days = 5 } }
			}
		}
	}

	### National Unification Decisions ###
	CHN_conquer_beijing_fallback_decision = { #Allow a players to fight for Beijing if missed out chance
		allowed = { tag = CHI }
		visible = {
			if = {
				limit = { tag = CHI }
				has_completed_focus = CHI_second_northern_expedition
			}
			else = {
				#Nothing for now
			}
			NOT = { has_wargoal_against = var:608.owner }
			ROOT = { NOT = { owns_state = 608 } } #Beijing
		}
		available = {
			can_declare_war_on = var:608.owner
			has_war = no
			is_subject = no
		}
		fire_only_once = no
		icon = GFX_decision_generic_flags
		priority = 100
		cost = 20

		cancel_if_not_visible = yes
		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		days_remove = 30

		war_with_target_on_remove = yes

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel CHN_conquer_beijing_fallback_decision"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_conquer_beijing_fallback_decision"
			setup_decision_attack_ai = yes
			var:608.owner = { incoming_war_notification_effect = yes }    #warning event
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_conquer_beijing_fallback_decision"
			clear_decision_attack_AI = yes
			var:608.owner = {
				ROOT = {
					create_wargoal = {
						target = PREV
						type = annex_everything
					}
				}
			}
		}
	}
	CHN_demand_control_of_beijing = { #In case a puppet decides to be cute a snag Beijing from them, blocking further progress
		allowed = { tag = CHI }
		visible = {
			if = {
				limit = { tag = CHI }
				has_completed_focus = CHI_second_northern_expedition
			}
			else = {
				#Nothing for now
			}
			var:608.owner = { is_subject_of = ROOT }
		}
		fire_only_once = no
		icon = GFX_decision_hand_grab
		priority = 100
		cost = 20

		cancel_if_not_visible = yes
		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		days_remove = 7

		war_with_target_on_remove = yes

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel CHN_demand_control_of_beijing"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_demand_control_of_beijing"
			setup_decision_attack_ai = yes

		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_demand_control_of_beijing"
			clear_decision_attack_AI = yes
			var:608.owner = { country_event = china_events.60 } #The Central Government Demands Beijing
			custom_effect_tooltip = if_they_accept_tt
			event_option_tooltip = china_events.61.a
			custom_effect_tooltip = if_they_refuse_tt
			var:608.owner = { event_option_tooltip = china_events.60.b }
		}
	}
	CHN_march_to_manchuria = { #Allow a players to invade FNG
		allowed = { tag = CHI }
		visible = {
			if = {
				limit = { tag = CHI }
				has_completed_focus = CHI_entrench_dangguo
			}
			else = {
				#None for now
			}
			ROOT = { NOT = { owns_state = 716 } } #Shenyang
		}
		available = {
			can_declare_war_on = var:716.owner
			has_war = no
			is_subject = no
		}
		fire_only_once = no
		icon = GFX_decision_generic_nationalism
		priority = 100
		cost = 20

		cancel_if_not_visible = yes
		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		days_remove = 30

		war_with_target_on_remove = yes

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel CHN_march_to_manchuria"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_march_to_manchuria"
			setup_decision_attack_AI = yes
			var:716.owner = { incoming_war_notification_effect = yes }   #warning event
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_march_to_manchuria"
			clear_decision_attack_AI = yes
			var:716.owner = {
				ROOT = {
					create_wargoal = {
						target = PREV
						type = annex_everything
					}
				}
			}
		}
	}

	china_move_capital = {
		icon = generic_political_rally

		allowed = { always = no } #activated by china_declare_unification

		available = {
			592 = { is_owned_and_controlled_by = ROOT } #Guangzhou
			608 = { is_owned_and_controlled_by = ROOT } #Beijing
			613 = { is_owned_and_controlled_by = ROOT } #Nanjing
			1048 = { is_owned_and_controlled_by = ROOT } #Wuhan
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = { factor = 1000 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_move_capital"
			country_event = china_events.50
		}
	}

	china_attack_decision = {
		icon = generic_prepare_civil_war

		allowed = { always = no } #activated by effect

		available = {
			NOT = { has_rule = can_not_declare_war } #united front
			NOT = { has_non_aggression_pact_with = FROM }
			if = {
				limit = { FROM = { is_subject = yes } }
				NOT = { has_non_aggression_pact_with = FROM.overlord }
			}
			FROM = { has_civil_war = no }
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
			if = {
				limit = {
					NOT = {
						tag = ANQ
						tag = CHI
						tag = LEP
					}
					FROM = {
						tag = SHD
						has_dictatorship_government = yes
					}
					NOT = { has_global_flag = LEP_collapse_SHD_out }
				}
				has_global_flag = LEP_league_war_over
			}
			if = {
				limit = {
					tag = SHD
					OR = {
						FROM = { tag = GXC }
						FROM = { tag = HNN }
					}
				}
				NOT = {
					has_idea = SHD_Zongchang_revolt
					has_idea = SHD_Yiguandao_revolt
					has_idea = SHD_Peasant_revolt
				}
				if = {
					limit = {
						has_country_leader = { character = SHD_zhang_zongchang }
						NOT = {
							any_owned_state = {
								OR = {
									has_state_flag = hunan_province_state
									has_state_flag = guizhou_province_state
									has_state_flag = guangdong_province_state
									has_state_flag = guangxi_province_state
								}
							}
						}
					}
					all_owned_state = {
						is_core_of = SHD
					}
				}
			}
		}

		visible = {
			can_declare_war_on = FROM
			is_subject = no
		}

		cancel_trigger = {
			OR = {
				NOT = { can_declare_war_on = FROM }
				is_subject = yes
			}
		}

		cost = @china_attack_decision_cost
		days_remove = @china_attack_decision_time
		war_with_target_on_remove = yes
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 10
				tag = FNG #FNG should prioritse attacking tags with these states
				FROM = {
					OR = {
						controls_state = 608 #Beijing
						controls_state = 613 #Nanjing
						controls_state = 1048 #Wuhan
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_country_flag = china_attack_decision_one_month_cooldown #ai will not take if if already taking another attack decision
					country_is_in_dangerous_war = yes #ai will not take it if already in a dangerous war
				}
			}
			modifier = {
				factor = 0
				FROM = { default_attack_AI_trigger = yes } #ai will not take it if they think FROM is stronger and FROM is not in a dangerous war
				FROM = { alliance_strength_ratio > 1.25 } #the > is intended because this 0 factor should only apply if FROM is NOT in a dangerous war
			}
			modifier = {
				factor = 0
				FROM = { is_subject = yes }
				FROM = { overlord = { default_attack_AI_trigger = yes } } #ai will not take it if they think FROM's overlord is stronger and FROM's overlord is not in a dangerous war
				FROM = { overlord = { alliance_strength_ratio > 1.25 } } #the > is intended because this 0 factor should only apply if FROM is NOT in a dangerous war
			}
			modifier = {
				factor = 0
				FROM = { original_tag = FNG }
				china_proper_not_united = yes
			}
			modifier = {
				factor = 0
				original_tag = ANQ
				OR = {
					AND = {
						china_is_aligned_with_northern_zhili = yes
						FROM = { is_subject_of = QIE }
					}
					china_same_alignment_as_FROM = yes
				}
			}
			modifier = {
				factor = 0
				FROM = { is_guaranteed_by = FNG }
				any_of_scopes = {
					array = global.china_tags_array
					exists = yes
					NOT = { is_ally_with = ROOT }
					NOT = { is_ally_with = FNG }
					NOT = { original_tag = XSM }
					NOT = { original_tag = SIK }
					NOT = { original_tag = KUM }
					NOT = { tag = FROM }
				}
			}
			modifier = {
				factor = 0
				original_tag = CHI
				AND = {
					NOT = { has_completed_focus = CHI_second_northern_expedition }
					focus_progress = {
						focus = CHI_second_northern_expedition
						progress > 0
					}
				}
			}
			modifier = {
				factor = 0
				original_tag = GXC
				OR = {
					AND = {
						NOT = { has_completed_focus = GXC_launch_hunan_expedition }
						focus_progress = {
							focus = GXC_launch_hunan_expedition
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = GXC_launch_western_expedition }
						focus_progress = {
							focus = GXC_launch_western_expedition
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = GXC_launch_eastern_expedition }
						focus_progress = {
							focus = GXC_launch_eastern_expedition
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = GXC_second_northern_expedition }
						focus_progress = {
							focus = GXC_second_northern_expedition
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = GXC_Purge_the_Party_State }
						focus_progress = {
							focus = GXC_Purge_the_Party_State
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = GXC_Attack_Qing }
						focus_progress = {
							focus = GXC_Attack_Qing
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = GXC_Liberate_the_Northeast }
						focus_progress = {
							focus = GXC_Liberate_the_Northeast
							progress > 0
						}
					}
				}
			}
			modifier = {
				factor = 0
				original_tag = QIE
				OR = {
					AND = {
						NOT = { has_completed_focus = QIE_destroy_federalists }
						focus_progress = {
							focus = QIE_destroy_federalists
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = QIE_cross_the_dai_river }
						focus_progress = {
							focus = QIE_cross_the_dai_river
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = QIE_destroy_kuomintang }
						focus_progress = {
							focus = QIE_destroy_kuomintang
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = QIE_false_republic }
						focus_progress = {
							focus = QIE_false_republic
							progress > 0
						}
					}
				}
			}
			modifier = {
				factor = 0
				original_tag = SZC
				OR = {
					AND = {
						NOT = { has_completed_focus = SZC_Destroy_the_Federalists }
						focus_progress = {
							focus = SZC_Destroy_the_Federalists
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = SZC_Cross_the_Dai_River }
						focus_progress = {
							focus = SZC_Cross_the_Dai_River
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = SZC_Destroy_the_Kuomintang }
						focus_progress = {
							focus = SZC_Destroy_the_Kuomintang
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = SZC_Recover_The_First_Province }
						focus_progress = {
							focus = SZC_Recover_The_First_Province
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = SZC_From_Chongqing_To_Beijing }
						focus_progress = {
							focus = SZC_From_Chongqing_To_Beijing
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = SZC_Liberate_the_Northeast }
						focus_progress = {
							focus = SZC_Liberate_the_Northeast
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = SZC_Purge_the_Party_State }
						focus_progress = {
							focus = SZC_Purge_the_Party_State
							progress > 0
						}
					}
				}
			}
			modifier = {
				factor = 0
				original_tag = YUN
				OR = {
					AND = {
						NOT = { has_completed_focus = YUN_Ultimatium_To_Sichuan2 }
						focus_progress = {
							focus = YUN_Ultimatium_To_Sichuan2
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = YUN_Enter_Yangtze_River2 }
						focus_progress = {
							focus = YUN_Enter_Yangtze_River2
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = YUN_Strike_At_Liangguang }
						focus_progress = {
							focus = YUN_Strike_At_Liangguang
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = YUN_End_the_Monarchy }
						focus_progress = {
							focus = YUN_End_the_Monarchy
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = YUN_Deal_with_Nanjing }
						focus_progress = {
							focus = YUN_Deal_with_Nanjing
							progress > 0
						}
					}
					AND = {
						NOT = { has_completed_focus = YUN_secure_northern_china }
						focus_progress = {
							focus = YUN_secure_northern_china
							progress > 0
						}
					}
				}
			}
			modifier = {
				factor = 0
				original_tag = GXC
				OR = {
					has_game_rule = { rule = GXC_forpol option = GXC_FORPOL_FNG }
					has_game_rule = { rule = GXC_forpol option = GXC_FORPOL_QIE }
					has_game_rule = { rule = GXC_forpol option = GXC_FORPOL_ZHL }
				}
			}
			modifier = {
				factor = 0
				original_tag = SZC
				has_game_rule = { rule = YUN_path option = YUN_PATH_RADSOC }
				FROM = {
					original_tag = YUN
					is_ai = yes
					NOT = { has_completed_focus = YUN_join_the_left_KMT_committee }
					NOT = { has_completed_focus = YUN_Long }
				}
			}
			modifier = {
				factor = 0
				FNG_can_attend_unification_conference = yes
				has_game_rule = { rule = FNG_conference option = FNG_CONFERENCE_AGREE }
				NOT = { has_global_flag = FNG_conference_success }
				NOT = { has_global_flag = FNG_conference_failed }
				FROM = { FNG_can_attend_unification_conference = yes }
			}
			modifier = {
				factor = 0
				OR = {
					tag = UPC
					china_is_aligned_with_federalists = yes
					FNG_can_attend_unification_conference = yes
				}
				has_game_rule = { rule = FNG_conference option = FNG_CONFERENCE_FEDS }
				NOT = { has_global_flag = FNG_conference_success }
				NOT = { has_global_flag = FNG_conference_failed }
				OR = {
					FROM = { tag = UPC }
					FROM = { FNG_can_attend_unification_conference = yes }
					FROM = { china_is_aligned_with_federalists = yes }
				}
			}
			modifier = {
				factor = 10
				OR = {
					original_tag = QIE
					original_tag = SZC
				}
				OR = {
					AND = {
						FROM = { original_tag = CHI }
						has_idea = QIE_attack_kmt_CHI_idea
					}
					AND = {
						FROM = { original_tag = GXC }
						OR = {
							has_idea = QIE_attack_kmt_GXC_idea
							has_idea = QIE_attack_fed_GXC_idea
						}
					}
					AND = {
						FROM = { original_tag = HNN }
						OR = {
							has_idea = QIE_attack_kmt_HNN_idea
							has_idea = QIE_attack_fed_HNN_idea
						}
					}
					AND = {
						FROM = { original_tag = FNG }
						has_idea = QIE_attack_FNG_idea
					}
					AND = {
						FROM = { original_tag = SZC }
						has_idea = QIE_attack_fed_SZC_idea
					}
					AND = {
						FROM = { original_tag = YUN }
						OR = {
							has_idea = QIE_attack_kmt_YUN_idea
							has_idea = QIE_attack_fed_YUN_idea
						}
					}
					FROM = { china_is_aligned_with_manchu = yes }
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel china_attack_decision target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_attack_decision target: [From.GetName]"
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
			set_country_flag = { flag = china_attack_decision_one_month_cooldown days = 30 value = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_attack_decision target: [From.GetName]"
			clear_decision_attack_AI = yes
			create_wargoal = {
				target = FROM
				type = annex_everything
			}
			if = {
				limit = { FROM = { has_civil_war = yes } }
				every_other_country = {
					limit = { civilwar_target = FROM }
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
						}
					}
				}
			}
		}
	}

	china_joint_strike_GXC_decision = {
		icon = GFX_decision_chinese_flag
		allowed = { always = no } #manually activated

		available = {
			NOT = { has_non_aggression_pact_with = GXC }
			custom_trigger_tooltip = {
				tooltip = china_joint_strike_tooltip
				NOT = { has_country_flag = china_sent_strike_offer } #to prevent you from sending to more than one at the same time
			}
			has_war = no
			FROM = { has_war = no }
			OR = {
				FROM = { is_neighbor_of = GXC }
				FROM = { any_subject_country = { is_neighbor_of = GXC } }
				GXC = { any_subject_country = { is_neighbor_of = FROM } }
			}
			has_global_flag = GXC_civil_war_over
		}

		visible = { #to prevent edge case of joint strike with tag that just attacked you
			NOT = { has_war_with = FROM }
		}

		cost = 25
		fire_only_once = yes
		days_remove = 20
		cancel_if_not_visible = yes
		war_with_on_remove = GXC
		priority = 100

		ai_will_do = { factor = 200 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_joint_strike_GXC_decision target: [From.GetName]"
			set_country_flag = china_sent_strike_offer
			FROM = {
				if = {
					limit = { is_subject = no }
					country_event = { id = china_events.3000 }
				}
				else = { #this is for the case the tag you are sending the event to is only a minor faction member, so they won't sign the rest away
					overlord = { country_event = { id = china_events.3000 } }
				}
			}
			GXC = {
				set_country_flag = { flag = imminent_war days = 30 value = 1 }
				country_event = china_events.3004 #warning event
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_joint_strike_GXC_decision target: [From.GetName]"
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				FROM = {
					declare_war_on = {
						target = GXC
						type = annex_everything
					}
				}
			}
			var:592.owner = {
				ROOT = {
					declare_war_on = {
						target = PREV
						type = annex_everything
					}
					GXC = { setup_decision_attack_AI = yes }
				}
			}
			if = {
				limit = {
					tag = HNN
				}
				remove_targeted_decision = { target = YUN decision = china_joint_strike_GXC_decision }
			}
			else_if = {
				limit = {
					tag = YUN
				}
				remove_targeted_decision = { target = HNN decision = china_joint_strike_GXC_decision }
			}
			clr_country_flag = china_sent_strike_offer
		}
	}

	china_joint_strike_GXC_attack_mission = { #mission for FROM who's attacking alongside them - can select to bail out early
		allowed = {
			always = no
		}
		icon = GFX_decision_generic_ignite_civil_war
		days_mission_timeout = 21
		priority = 200

		is_good = yes

		cancel_trigger = {
			if = {
				limit = {
					tag = HNN
				}
				has_war_with = YUN
			}
			else_if = {
				limit = {
					tag = YUN
				}
				has_war_with = HNN
			}
		}

		ai_will_do = { factor = 0 }

		selectable_mission = yes
		war_with_on_timeout = GXC

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_joint_strike_GXC_attack_mission target: [From.GetName]"
			if = {
				limit = {
					tag = HNN
				}
				custom_effect_tooltip = HNN_GXC_chicken_exit
				YUN = { country_event = china_events.3003 } #FROM chickened out, refueses to join
			}
			else_if = {
				limit = {
					tag = YUN
				}
				custom_effect_tooltip = YUN_GXC_chicken_exit
				HNN = { country_event = china_events.3003 } #FROM chickened out, refueses to join
			}
		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout china_joint_strike_GXC_attack_mission target: [From.GetName]"
			declare_war_on = {
				target = GXC
				type = annex_everything
			}
		}
	}

	china_offer_alliance = {
		icon = eng_trade_unions_demand

		available = {
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
			FROM = { has_civil_war = no }
			if = {
				limit = { FROM = { tag = YUN } }
				NOT = { FROM = { has_idea = YUN_chaos_army } }
			}
			else_if = {
				limit = {
					FROM = {
						tag = SHD
						has_dictatorship_government = yes
					}
					NOT = { has_global_flag = LEP_collapse_SHD_out }
				}
				has_global_flag = LEP_league_war_over
			}
		}

		visible = {
			china_is_potential_government = yes
			FROM = { china_can_ROOT_offer_alliance = yes }
		}

		target_array = china_possible_allies_array
		target_trigger = {
			china_is_potential_government = yes
			FROM = { china_can_ROOT_offer_alliance = yes }
		}

		cost = 40
		fire_only_once = yes

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 2
				FROM = { china_same_alignment_as_PREV = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_offer_alliance target: [From.GetName]"
			FROM = { country_event = china_events.7 }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = { china_puppet_FROM_effect = yes }
		}
	}

	china_offer_alliance_northwest = {
		name = china_offer_alliance
		icon = eng_trade_unions_demand

		available = {
			OR = {
				has_global_flag = northwest_conflict_ended
				XSM = { exists = no } #In case there's an early SSJW and Northwest War Never Happened
				XSM = { is_subject_of = ROOT } #In case there's an early SSJW and Northwest War Never Happened
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
			FROM = { has_civil_war = no }
			if = {
				limit = {
					FROM = { tag = SIK }
				}
				FROM = {
					NOT = { has_war_with = KUM }
					NOT = { has_war_with = ETS }
				}
			}
			if = {
				limit = {
					FROM = { tag = KUM }
				}
				FROM = {
					NOT = { has_war_with = ETS }
					NOT = { has_war_with = SIK }
				}
			}
			NOT = { has_idea = SHX_suiyuan_QIE_neutrality_idea }
		}

		visible = {
			china_is_potential_government = yes
			FROM = {
				exists = yes
				is_subject = no
				china_compatible_alignment_to_PREV = yes
				at_war_with_or_justifying_wargoal_against_ROOT = no
			}
		}

		target_array = china_possible_allies_array_northwest
		target_trigger = {
			FROM = {
				is_subject = no
				china_compatible_alignment_to_PREV = yes
				at_war_with_or_justifying_wargoal_against_ROOT = no
			}
		}

		cost = 40
		fire_only_once = yes

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_offer_alliance_northwest target: [From.GetName]"
			FROM = { country_event = china_events.7 }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = { china_puppet_FROM_effect = yes }
		}
	}

	china_demand_submission = {
		icon = eng_trade_unions_demand

		available = {
			NOT = { has_rule = can_not_declare_war } #united front
			NOT = { has_non_aggression_pact_with = FROM }
			if = {
				limit = { FROM = { is_subject = yes } }
				NOT = { has_non_aggression_pact_with = FROM.overlord }
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
			FROM = { has_civil_war = no }
			if = {
				limit = { FROM = { tag = YUN } }
				NOT = { FROM = { has_idea = YUN_chaos_army } }
			}
			else_if = {
				limit = { FROM = { tag = SHX } }
				NOT = { has_idea = SHX_suiyuan_QIE_neutrality_idea }
			}
			else_if = {
				limit = {
					FROM = {
						tag = SHD
						has_dictatorship_government = yes
					}
					NOT = { has_global_flag = LEP_collapse_SHD_out }
				}
				has_global_flag = LEP_league_war_over
			}
			else_if = {
				limit = { FROM = { tag = GXC } }
				has_global_flag = GXC_civil_war_over
			}
		}

		visible = {
			is_subject = no
			can_declare_war_on = FROM
			FROM = {
				is_chinese_tag = yes
				is_subject = no
				OR = {
					china_compatible_alignment_to_PREV = no
					china_is_potential_government = yes
				}
			}
		}

		target_array = china_possible_targets_array
		target_trigger = {
			FROM = {
				is_subject = no
				OR = {
					china_compatible_alignment_to_PREV = no
					china_is_potential_government = yes
				}
			}
		}

		cancel_trigger = {
			OR = {
				NOT = { can_declare_war_on = FROM }
				FROM = { is_subject = yes }
				is_subject = yes
			}
		}

		cost = @china_attack_decision_cost
		days_remove = @china_attack_decision_time
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 10
				tag = FNG #FNG should prioritse attacking tags with these states
				FROM = {
					OR = {
						controls_state = 608 #Beijing
						controls_state = 613 #Nanjing
						controls_state = 1048 #Wuhan
					}
				}
			}
			modifier = {
				factor = 10
				OR = {
					original_tag = QIE
					original_tag = SZC
				}
				OR = {
					AND = {
						FROM = { original_tag = CHI }
						has_idea = QIE_attack_kmt_CHI_idea
					}
					AND = {
						FROM = { original_tag = GXC }
						OR = {
							has_idea = QIE_attack_kmt_GXC_idea
							has_idea = QIE_attack_fed_GXC_idea
						}
					}
					AND = {
						FROM = { original_tag = HNN }
						OR = {
							has_idea = QIE_attack_kmt_HNN_idea
							has_idea = QIE_attack_fed_HNN_idea
						}
					}
					AND = {
						FROM = { original_tag = FNG }
						has_idea = QIE_attack_FNG_idea
					}
					AND = {
						FROM = { original_tag = SZC }
						has_idea = QIE_attack_fed_SZC_idea
					}
					AND = {
						FROM = { original_tag = YUN }
						OR = {
							has_idea = QIE_attack_kmt_YUN_idea
							has_idea = QIE_attack_fed_YUN_idea
						}
					}
					FROM = { china_is_aligned_with_manchu = yes }
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel china_demand_submission target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_demand_submission target: [From.GetName]"
			setup_decision_attack_AI = yes
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_demand_submission target: [From.GetName]"
			#clear_decision_attack_AI is triggered by the final events in the chain
			FROM = { country_event = china_events.1 }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = { china_puppet_FROM_effect = yes }
			hidden_effect = {
				remove_from_array = { china_possible_targets_array = FROM }
				remove_targeted_decision = { decision = china_demand_submission target = FROM }
			}
		}
	}

	china_integrate_subjects = {
		icon = eng_trade_unions_support

		available = {
			NOT = { has_war_together_with = FROM }
			NOT = { has_rule = can_not_declare_war } #united front
			if = {
				limit = { FROM = { has_autonomy_state = integrated_governorate } }
				china_is_the_unifier_of_china_trigger = yes
				is_owner_neighbor_of = FROM
			}
		}

		visible = {
			if = {
				limit = {
					original_tag = SIK
				}
				NOT = { FROM = { tag = KUM } }
			}
		}

		cancel_trigger = {
			NOT = { has_subject = FROM }
		}

		targets = { KUM } #special exception for Manchu puppet Khanate
		target_array = global.china_tags_array
		target_root_trigger = { has_global_flag = LEP_collapse_happened }
		target_trigger = {
			has_subject = FROM
			FROM = { china_is_governorate = yes }
		}

		cost = 50
		days_remove = 50

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				date < 1939.1.1
			}
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel china_integrate_subjects target: [From.GetName]"
			hidden_effect = { FROM = { remove_mission = china_integration_timer } }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_integrate_subjects target: [From.GetName]"
			FROM = {
				country_event = china_events.10
				hidden_effect = { activate_mission = china_integration_timer }
			}
			custom_effect_tooltip = "[ROOT.china_integration_refusal_chance_tooltip]"
			if = {
				limit = { NOT = { check_variable = { refusal_weight = 0 } } }
				custom_effect_tooltip = if_they_refuse_tt
				effect_tooltip = {
					FROM = { china_break_puppet_effect = yes }
					create_wargoal = {
						target = FROM
						type = annex_everything
					}
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_integrate_subjects target: [From.GetName]"
			FROM = {
				hidden_effect = { country_event = china_events.11 }
				effect_tooltip = { save_global_event_target_as = target }
			}
			effect_tooltip = {
				add_collaboration = { target = FROM value = 0.05 }
				if = {
					limit = { FROM = { has_autonomy_state = integrated_governorate } }
					china_integrate_TARGET_effect = yes
				}
				else_if = {
					limit = { FROM = { has_autonomy_state = governorate } }
					set_autonomy = {
						target = FROM
						autonomy_state = integrated_governorate
						end_wars = no
					}
				}
				else_if = {
					limit = { FROM = { has_autonomy_state = autonomous_governorate } }
					set_autonomy = {
						target = FROM
						autonomy_state = governorate
						end_wars = no
					}
				}
				else_if = {
					limit = { FROM = { has_autonomy_state = associated_governorate } }
					set_autonomy = {
						target = FROM
						autonomy_state = autonomous_governorate
						end_wars = no
					}
				}
			}
		}
	}

	china_integration_timer = {
		icon = eng_trade_unions_demand

		allowed = { always = no } #activated by china_integrate_subjects

		available = {
			has_capitulated = no
			NOT = { has_war_together_with = overlord }
		}

		cancel_trigger = {
			is_subject = no
		}

		cost = 0
		is_good = yes
		days_mission_timeout = 100
		selectable_mission = yes

		ai_will_do = { factor = 0 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel china_integration_timer target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_integration_timer target: [From.GetName]"
			if = {
				limit = { overlord = { china_compatible_alignment_to_PREV = yes } }
				add_stability = -0.15
				add_political_power = -100
				#if = {
				#	limit = { overlord = { china_same_alignment_as_PREV = yes } }
				#	var:country_leader = { clear_variable = china_alignment }
				#}
			}
			set_country_flag = china_revolted_against_@var:overlord
			create_wargoal = {
				target = overlord
				type = topple_government
			}
			custom_effect_tooltip = tooltip_white_line
			overlord = {
				if = {
					limit = { is_in_array = { china_possible_allies_array = ROOT } }
					remove_from_array = { china_possible_allies_array = ROOT }
				}
				if = {
					limit = { is_in_array = { china_possible_allies_array_northwest = ROOT } }
					remove_from_array = { china_possible_allies_array_northwest = ROOT }
				}
				effect_tooltip = {
					create_wargoal = {
						target = ROOT
						type = annex_everything
					}
				}
				if = {
					limit = { NOT = { any_other_country = { has_country_flag = china_revolted_against_@FROM } } }
					country_event = china_events.13
				}
				else = {
					country_event = china_events.15
				}
			}
			custom_effect_tooltip = tooltip_white_line
			china_break_puppet_effect = yes
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout china_integration_timer target: [From.GetName]"
			effect_tooltip = {
				if = {
					limit = { has_autonomy_state = integrated_governorate }
					save_event_target_as = target
					overlord = {
						add_collaboration = { target = FROM value = 0.05 }
						china_integrate_TARGET_effect = yes
					}
				}
				else_if = {
					limit = { has_autonomy_state = governorate }
					overlord = {
						add_collaboration = { target = FROM value = 0.05 }
						set_autonomy = {
							target = FROM
							autonomy_state = integrated_governorate
							end_wars = no
						}
					}
				}
				else_if = {
					limit = { has_autonomy_state = autonomous_governorate }
					overlord = {
						add_collaboration = { target = FROM value = 0.05 }
						set_autonomy = {
							target = FROM
							autonomy_state = governorate
							end_wars = no
						}
					}
				}
				else_if = {
					limit = { has_autonomy_state = associated_governorate }
					overlord = {
						add_collaboration = { target = FROM value = 0.05 }
						set_autonomy = {
							target = FROM
							autonomy_state = autonomous_governorate
							end_wars = no
						}
					}
				}
			}
		}
	}
	china_break_free = {
		icon = eng_trade_unions_demand

		available = {
			has_war = no
			custom_trigger_tooltip = {
				tooltip = china_half_strength_of_overlord_tt
				overlord = { strength_ratio = { tag = ROOT ratio < 2 } }
			}
			custom_trigger_tooltip = {
				tooltip = china_has_been_365_days_tt
				NOT = { has_country_flag = china_submission_mandatory_loyalty_timer_flag }
			}
		}

		visible = {
			OR = {
				has_autonomy_state = associated_governorate
				has_autonomy_state = autonomous_governorate
				has_autonomy_state = governorate
				has_autonomy_state = integrated_governorate
			}
			date > 1936.3.1
			if = {
				limit = { original_tag = KUM }
				overlord = { NOT = { original_tag = SIK } } #Kumul breaks away via event
			}
			if = {
				limit = { overlord = { has_country_leader = { character = QIE_aisin_gioro_puyi } } }
				NOT = { check_variable = { country_leader:china_alignment = token:manchu_qing } } #Monarchist Shandong supports the monarchy and wouldn't revolt if a puppet
			}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = { factor = 0 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_break_free target: [From.GetName]"
			if = {
				limit = { overlord = { china_compatible_alignment_to_PREV = yes } }
				add_stability = -0.15
				add_political_power = -50
				#if = {
				#	limit = { overlord = { china_same_alignment_as_PREV = yes } }
				#	var:country_leader = { clear_variable = china_alignment }
				#}
			}
			set_country_flag = china_revolted_against_@var:overlord
			create_wargoal = {
				target = overlord
				type = topple_government
			}
			custom_effect_tooltip = tooltip_white_line
			overlord = {
				if = {
					limit = { is_in_array = { china_possible_allies_array = ROOT } }
					remove_from_array = { china_possible_allies_array = ROOT }
				}
				if = {
					limit = { is_in_array = { china_possible_allies_array_northwest = ROOT } }
					remove_from_array = { china_possible_allies_array_northwest = ROOT }
				}
				effect_tooltip = {
					create_wargoal = {
						target = ROOT
						type = annex_everything
					}
				}
				if = {
					limit = { NOT = { any_other_country = { has_country_flag = china_revolted_against_@FROM } } }
					country_event = china_events.13
				}
				else = {
					country_event = china_events.15
				}
			}
			custom_effect_tooltip = tooltip_white_line
			china_break_puppet_effect = yes
		}
	}

	### Subject Offering Submission ###
	CHN_join_NPA_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			#Can't do always no because otherwise won't be able to check dynamically if new governments spawn.
			OR = {
				tag = HNN
				tag = SHX
			}
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = NPA

			if = {
				limit = { tag = HNN }
				has_country_leader = { character = HNN_tang_shengzhi }
				has_completed_focus = HNN_victory_of_the_united_front
				NOT = {
					OR = {
						CHI = {
							exists = yes
							is_subject = no
							NOT = { has_war_with = ROOT }
							china_refused_alliance = no
						}
						GXC = {
							china_is_aligned_with_kmt = yes
							exists = yes
							is_subject = no
							NOT = { has_war_with = ROOT }
							china_refused_alliance = no
						}
						YUN = {
							OR = {
								has_idea = YUN_chaos_army
								china_is_aligned_with_kmt = yes
							}
							exists = yes
							is_subject = no
							NOT = { has_war_with = ROOT }
							china_refused_alliance = no
						}
						AND = {
							SZC = {
								china_is_aligned_with_republicans = yes
								exists = yes
								is_subject = no
								NOT = { has_war_with = ROOT }
								china_refused_alliance = no
							}
							event_target:original_liangguang = { GXC_chen_jiongming = { is_dead = no } }
						}
					}
				}
			}
			else_if = {
				limit = { tag = SHX }
				has_completed_focus = SHX_beyond_borders
			}
		}

		targets = { NPA }
		target_trigger = { FROM = { tag = NPA } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				tag = HNN
				OR = {
					CHI = {
						exists = yes
						is_subject = no
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
					any_country_with_original_tag = {
						original_tag_to_check = GXC
						china_is_aligned_with_republicans = yes
						exists = yes
						is_subject = no
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
					YUN = {
						china_is_aligned_with_republicans = yes
						exists = yes
						is_subject = no
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
					AND = {
						SZC = {
							china_is_aligned_with_republicans = yes
							exists = yes
							is_subject = no
							NOT = { has_war_with = ROOT }
							china_refused_alliance = no
						}
						event_target:original_liangguang = { GXC_chen_jiongming = { is_dead = no } }
					}
				}
			}
			modifier = {
				factor = 0
				tag = SHX
				NOT = { has_game_rule = { rule = SHX_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_NPA } }
			}
			modifier = {
				factor = 0
				tag = SHX
				#Yan will generally join AGJ whenever possible unless Feng Yuxiang is his SIC
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_NPA } }
				country_exists = AGJ
				has_country_leader = { character = SHX_yan_xishan }
				SHX_feng_yuxiang = { is_second_in_command = no }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_NPA_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_NZH_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			#Can't do always no because otherwise won't be able to check dynamically if new governments spawn.
			OR = {
				tag = HNN
				tag = SHX
			}
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = NZH

			if = {
				limit = { tag = HNN }
				OR = {
					has_completed_focus = HNN_strongarm_the_assembly
					has_country_flag = HNN_zhao_chooses_to_align_with_the_Zhili_flag
				}
				if = {
					limit = {
						has_country_leader = { character = HNN_zhao_hengti }
					}
					FROM = { original_tag = QIE } #Zhao should only be able to ally the Zhili in Beijing
				}
			}
			else_if = {
				limit = { tag = SHX }
				NZH = { NOT = { original_tag = QIE } } #SHX has special content for joining QIE
				has_completed_focus = SHX_beyond_borders
			}
		}

		targets = { NZH }
		target_trigger = { FROM = { tag = NZH } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				tag = SHX
				NOT = { has_game_rule = { rule = SHX_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_QIE } }
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_ZHL } }
			}
			modifier = {
				factor = 0
				tag = SHX
				#Yan will generally join AGJ whenever possible unless Feng Yuxiang is his SIC
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_ZHL } }
				country_exists = AGJ
				has_country_leader = { character = SHX_yan_xishan }
				SHX_feng_yuxiang = { is_second_in_command = no }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_NZH_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_SZH_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			#Can't do always no because otherwise won't be able to check dynamically if new governments spawn.
			tag = HNN
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = SZH

			if = {
				limit = { tag = HNN }
				NOT = { country_exists = NZH }
				has_completed_focus = HNN_strongarm_the_assembly
			}
		}

		targets = { SZH }
		target_trigger = { FROM = { tag = SZH } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = { factor = 10 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_SZH_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_MCU_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			always = no
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = MCU
		}

		targets = { MCU }
		target_trigger = { FROM = { tag = MCU } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = { factor = 10 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_MCU_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_AGJ_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			#Can't do always no because otherwise won't be able to check dynamically if new governments spawn.
			OR = {
				tag = SHD
				tag = SHX
			}
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			if = {
				limit = {
					NOT = { tag = SHD }
				}
				OR = {
					is_neighbor_of = FROM
					any_subject_country = { is_neighbor_of = FROM }
					FROM = { any_subject_country = { is_neighbor_of = ROOT } }
				}
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = AGJ

			if = {
				limit = { tag = SHD }
				has_country_flag = SHD_FNG_invites_us_to_conference_flag
			}
			else_if = {
				limit = { tag = SHX }
				has_country_leader = { character = SHX_yan_xishan }
				has_completed_focus = SHX_beyond_borders
			}
		}

		targets = { AGJ }
		target_trigger = { FROM = { tag = AGJ } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				tag = SHX
				NOT = { has_game_rule = { rule = SHX_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_FNG } }
			}
			modifier = {
				factor = 0
				tag = SHX
				#Yan will generally join AGJ whenever possible unless Feng Yuxiang is his SIC
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_FNG } }
				has_country_leader = { character = SHX_yan_xishan }
				SHX_feng_yuxiang = { is_second_in_command = yes }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_AGJ_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_UPC_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			#Can't do always no because otherwise won't be able to check dynamically if new governments spawn.
			OR = {
				tag = HNN
				tag = SHX
			}
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = UPC

			if = {
				limit = { tag = HNN }
				OR = {
					has_completed_focus = HNN_the_democratic_mandate
					AND = {
						has_country_leader = { character = HNN_tang_shengzhi }
						has_completed_focus = HNN_victory_of_the_united_front
						NOT = {
							CHI = {
								exists = yes
								is_subject = no
								NOT = { has_war_with = ROOT }
								china_refused_alliance = no
							}
							GXC = {
								china_is_aligned_with_kmt = yes
								exists = yes
								is_subject = no
								NOT = { has_war_with = ROOT }
								china_refused_alliance = no
							}
							YUN = {
								OR = {
									has_idea = YUN_chaos_army
									china_is_aligned_with_kmt = yes
								}
								exists = yes
								is_subject = no
								NOT = { has_war_with = ROOT }
								china_refused_alliance = no
							}
						}
					}
				}
			}
			else_if = {
				limit = { tag = SHX }
				has_country_leader = { character = SHX_feng_yuxiang }
				has_completed_focus = SHX_beyond_borders
			}
		}

		targets = { UPC }
		target_trigger = { FROM = { tag = UPC } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				tag = HNN
				has_country_leader = { character = HNN_tang_shengzhi }
				OR = {
					CHI = {
						exists = yes
						is_subject = no
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
					GXC = {
						china_is_aligned_with_kmt = yes
						exists = yes
						is_subject = no
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
					YUN = {
						OR = {
							has_idea = YUN_chaos_army
							china_is_aligned_with_kmt = yes
						}
						exists = yes
						is_subject = no
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
				}
			}
			modifier = {
				factor = 0
				tag = SHX
				NOT = { has_game_rule = { rule = SHX_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_FEDS } }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_UPC_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_LKT_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			#Can't do always no because otherwise won't be able to check dynamically if new governments spawn.
			OR = {
				tag = HNN
				tag = GXC
				tag = SHX
			}
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = LKT

			if = {
				limit = { tag = HNN }
				OR = {
					has_country_leader = { character = HNN_tang_shengzhi }
					has_country_leader = { character = HNN_cheng_qian }
				}
				has_completed_focus = HNN_victory_of_the_united_front
			}
			else_if = {
				limit = { tag = GXC }
				has_country_leader = { character = GXC_chen_mingshu }
				has_global_flag = GXC_civil_war_over
			}
			else_if = {
				limit = { tag = SHX }
				has_country_leader = { character = SHX_feng_yuxiang }
				has_completed_focus = SHX_beyond_borders
			}
		}

		targets = { LKT }
		target_trigger = { FROM = { tag = LKT } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				tag = HNN
				has_country_leader = { character = HNN_cheng_qian }
				OR = {
					any_country_with_original_tag = {
						original_tag_to_check = GXC
						exists = yes
						is_subject = no
						china_is_aligned_with_right_kmt = yes
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
					YUN = {
						OR = {
							has_idea = YUN_chaos_army
							china_is_aligned_with_right_kmt = yes
						}
						exists = yes
						is_subject = no
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
				}
			}
			modifier = {
				factor = 0
				tag = SHX
				NOT = { has_game_rule = { rule = SHX_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_LKMT } }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_LKT_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_CSP_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			#Can't do always no because otherwise won't be able to check dynamically if new governments spawn.
			OR = {
				tag = HNN
				tag = GXC
				tag = SHX
			}
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = CSP

			if = {
				limit = { tag = HNN }
				has_country_flag = HNN_gong_tuan_victory_flag
			}
			else_if = {
				limit = { tag = GXC }
				has_country_leader = { character = GXC_chen_mingshu }
				has_global_flag = GXC_civil_war_over
			}
			else_if = {
				limit = { tag = SHX }
				has_country_leader = { character = SHX_feng_yuxiang }
				has_completed_focus = SHX_beyond_borders
			}
		}

		targets = { CSP }
		target_trigger = { FROM = { tag = CSP } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				tag = HNN
				has_country_flag = HNN_gong_tuan_victory_flag
				OR = {
					any_country_with_original_tag = {
						original_tag_to_check = GXC
						exists = yes
						is_subject = no
						china_is_aligned_with_right_kmt = yes
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
					YUN = {
						OR = {
							has_idea = YUN_chaos_army
							china_is_aligned_with_right_kmt = yes
						}
						exists = yes
						is_subject = no
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
				}
			}
			modifier = {
				factor = 0
				tag = SHX
				NOT = { has_game_rule = { rule = SHX_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_LKMT } }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_LKT_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_RKT_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			#Can't do always no because otherwise won't be able to check dynamically if new governments spawn.
			OR = {
				tag = HNN
				tag = SHX
			}
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = RKT

			if = {
				limit = { tag = HNN }
				OR = {
					has_country_leader = { character = HNN_tang_shengzhi }
					has_country_leader = { character = HNN_cheng_qian }
				}
				has_completed_focus = HNN_victory_of_the_united_front
			}
			else_if = {
				limit = { tag = SHX }
				has_completed_focus = SHX_beyond_borders
			}
		}

		targets = { RKT }
		target_trigger = { FROM = { tag = RKT } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				tag = HNN
				has_country_leader = { character = HNN_tang_shengzhi }
				OR = {
					CHI = {
						exists = yes
						is_subject = no
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
					any_country_with_original_tag = {
						original_tag_to_check = GXC
						exists = yes
						is_subject = no
						china_is_aligned_with_left_kmt = yes
						NOT = { has_war_with = ROOT }
						china_refused_alliance = no
					}
				}
			}
			modifier = {
				factor = 0
				tag = SHX
				NOT = { has_game_rule = { rule = SHX_forpol option = DEFAULT } }
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_RKMT } }
			}
			modifier = {
				factor = 0
				tag = SHX
				#Yan will generally join AGJ whenever possible unless Feng Yuxiang is his SIC
				NOT = { has_game_rule = { rule = SHX_forpol option = SHX_FORPOL_RKMT } }
				country_exists = AGJ
				has_country_leader = { character = SHX_yan_xishan }
				SHX_feng_yuxiang = { is_second_in_command = no }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_RKT_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_RGC_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			always = no
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = RGC
		}

		targets = { RGC }
		target_trigger = { FROM = { tag = RGC } }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = { factor = 10 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_RGC_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	CHN_join_FROM_decision = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			always = no
		}
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = {
				china_is_valid_government_to_join = yes
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
				FROM = { any_subject_country = { is_neighbor_of = ROOT } }
			}
		}
		visible = {
			china_is_potential_government = no
			is_subject = no
			country_exists = FROM

			if = {
				limit = { tag = HNN }
				NOT = {
					country_exists = NZH
					country_exists = SZH
				}
			}
		}

		targets = { FROM }
		target_non_existing = yes
		fire_only_once = yes
		cost = 0

		ai_will_do = { factor = 10 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_join_FROM_decision target: [From.GetName]"
			FROM = {
				country_event = china_events.4
				custom_effect_tooltip = if_they_accept
				effect_tooltip = { china_puppet_ROOT_effect = yes }
			}
		}
	}

	### Dealing with the Outskirts ###
	china_demand_annexation = {
		icon = ger_mefo_bills

		allowed = { always = no }

		available = {
			NOT = { has_non_aggression_pact_with = FROM }
			if = {
				limit = { FROM = { is_subject = yes } }
				NOT = { has_non_aggression_pact_with = FROM.overlord }
			}
			if = {
				limit = { FROM = { is_in_faction = yes } }
				NOT = { has_non_aggression_pact_with = FROM.faction_leader }
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
			}
			FROM = { surrender_progress < 0.05 }
			OR = {
				has_global_flag = northwest_conflict_ended
				XSM = { exists = no } #In case there's an early SSJW and Northwest War Never Happened
				XSM = { is_subject_of = ROOT } #In case there's an early SSJW and Northwest War Never Happened
			}
			NOT = { has_idea = SHX_suiyuan_QIE_neutrality_idea }
		}

		visible = {
			is_subject = no
		}

		cancel_trigger = {
			OR = {
				is_subject = yes
				NOT = { can_declare_war_on = FROM }
			}
		}

		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = 40
		days_remove = @china_attack_decision_time
		fire_only_once = yes
		war_with_target_on_complete = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = FROM }
				OR = {
					country_is_in_dangerous_war = yes
					FROM = { default_attack_AI_trigger = yes }
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel china_demand_annexation target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_demand_annexation target: [From.GetName]"
			setup_decision_attack_AI = yes
			FROM = { country_event = { id = china_events.100 days = 1 } } #warning event
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				annex_country = {
					target = FROM
					transfer_troops = no
				}
			}
			custom_effect_tooltip = if_they_refuse_tt
			effect_tooltip = {
				create_wargoal = {
					target = FROM
					type = annex_everything
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_demand_annexation target: [From.GetName]"
			clear_decision_attack_AI = yes
		}
	}

	### Expand autonomy decisions ###
	china_expand_mongolian_autonomy = {
		icon = GFX_decision_SWI_no_elected_president
		visible = {
			329 = { #Tuva
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_dynamic_modifier = {
						modifier = CHN_autonomous_region_modifier
						scope = THIS
					}
				}
			}
			any_owned_state = {
				is_core_of = MON
				has_dynamic_modifier = {
					modifier = CHN_autonomous_region_modifier
					scope = THIS
				}
			}
		}
		highlight_states = {
			highlight_state_targets = { state = 329 }
		}
		fire_only_once = yes
		cancel_if_not_visible = no
		ai_will_do = { factor = 100 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_expand_mongolian_autonomy"
			329 = {
				add_compliance = 10
				add_resistance = -5
			}
		}
		cost = 10
		days_remove = 30
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_expand_mongolian_autonomy"
			329 = {
				add_dynamic_modifier = {
					modifier = CHN_autonomous_region_modifier
					scope = THIS
				}
			}
		}
	}

	china_expand_tibetan_autonomy = {
		icon = GFX_decision_SWI_no_elected_president
		visible = {
			858 = { #Tawang
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_dynamic_modifier = {
						modifier = CHN_autonomous_region_modifier
						scope = THIS
					}
				}
			}
			any_owned_state = {
				is_core_of = TIB
				has_dynamic_modifier = {
					modifier = CHN_autonomous_region_modifier
					scope = THIS
				}
			}
		}
		highlight_states = {
			highlight_state_targets = { state = 858 }
		}
		fire_only_once = yes
		cancel_if_not_visible = no
		ai_will_do = { factor = 100 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_expand_tibetan_autonomy"
			858 = {
				add_compliance = 10
				add_resistance = -5
			}
		}
		cost = 10
		days_remove = 30
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_expand_tibetan_autonomy"
			858 = {
				add_dynamic_modifier = {
					modifier = CHN_autonomous_region_modifier
					scope = THIS
				}
			}
		}
	}
	china_expand_xinjiang_autonomy = {
		icon = GFX_decision_SWI_no_elected_president
		visible = {
			897 = { #Aksai Chin
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_dynamic_modifier = {
						modifier = CHN_autonomous_region_modifier
						scope = THIS
					}
				}
			}
			any_owned_state = {
				is_core_of = ETS
				has_dynamic_modifier = {
					modifier = CHN_autonomous_region_modifier
					scope = THIS
				}
			}
		}
		highlight_states = {
			highlight_state_targets = { state = 897 }
		}
		fire_only_once = yes
		cancel_if_not_visible = no
		ai_will_do = { factor = 100 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_expand_xinjiang_autonomy"
			897 = {
				add_compliance = 10
				add_resistance = -5
			}
		}
		cost = 10
		days_remove = 30
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_expand_xinjiang_autonomy"
			897 = {
				add_dynamic_modifier = {
					modifier = CHN_autonomous_region_modifier
					scope = THIS
				}
			}
		}
	}

	### Dealing with the Concessions ###
	china_negotiate_with_legation_cities = {
		icon = ger_mefo_bills

		available = {
			NOT = { has_non_aggression_pact_with = FROM }
			if = {
				limit = { FROM = { is_subject = yes } }
				NOT = { has_non_aggression_pact_with = FROM.overlord }
			}
			if = {
				limit = { FROM = { is_in_faction = yes } }
				NOT = { has_non_aggression_pact_with = FROM.faction_leader }
			}
			OR = {
				is_neighbor_of = FROM
				any_subject_country = { is_neighbor_of = FROM }
			}
			FROM = { surrender_progress < 0.05 }
		}

		visible = {
			is_subject = no
		}

		cancel_trigger = {
			OR = {
				is_subject = yes
				NOT = { country_exists = FROM }
				has_war_with = FROM
			}
		}

		targets = { LEC }
		target_root_trigger = {
			has_country_flag = china_concession_decisions_unlocked
			is_subject = no
		}
		target_trigger = {
			NOT = { has_war_with = FROM }
		}

		cost = 60
		days_remove = @china_attack_decision_time
		fire_only_once = yes
		war_with_target_on_complete = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = FROM }
				OR = {
					country_is_in_dangerous_war = yes
					FROM = { default_attack_AI_trigger = yes }
				}
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel china_negotiate_with_legation_cities target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_negotiate_with_legation_cities target: [From.GetName]"
			setup_decision_attack_AI = yes
			FROM = { country_event = china_events.220 }   #warning event
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				annex_country = {
					target = FROM
					transfer_troops = no
				}
			}
			custom_effect_tooltip = if_they_refuse_tt
			effect_tooltip = {
				if = {
					limit = { is_in_faction_with = FROM }
					leave_faction = yes
				}
				create_wargoal = {
					target = FROM
					type = annex_everything
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_negotiate_with_legation_cities target: [From.GetName]"
			clear_decision_attack_AI = yes
		}
	}
	china_request_return_of_concessions = {
		icon = SWI_dismiss_council

		available = {
			OR = {
				NOT = { country_exists = LEC }
				has_global_flag = LEC_bankrupt
			}
			if = {
				limit = { has_global_flag = JAP_defeated_by_china }
				if = {
					limit = { FROM = { owns_state = 326 } } #Hong Kong
					326 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 609 } } #Tianjin
					609 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 728 } } #Guangzhouwan
					728 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 729 } } #Macau
					729 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 743 } } #Shanghai
					743 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 744 } } #Qingdao
					744 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 745 } } #Dalian
					745 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 746 } } #Ningbo
					746 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 747 } } #Ningbo
					747 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 801 } } #Shantou
					801 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 802 } } #Xiamen
					802 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 803 } } #Wenzhou
					803 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 996 } } #Weihaiwei
					996 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 1075 } } #Nantong
					1075 = { is_controlled_by_ROOT_owner_defeated_japan_or_mutual_enemy = yes }
				}
			}
			else = {
				if = {
					limit = { FROM = { owns_state = 326 } } #Hong Kong
					326 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 609 } } #Tianjin
					609 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 728 } } #Guangzhouwan
					728 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 729 } } #Macau
					729 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 743 } } #Shanghai
					743 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 744 } } #Qingdao
					744 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 745 } } #Dalian
					745 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 746 } } #Ningbo
					746 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 747 } } #Ningbo
					747 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 801 } } #Shantou
					801 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 802 } } #Xiamen
					802 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 803 } } #Wenzhou
					803 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 996 } } #Weihaiwei
					996 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
				if = {
					limit = { FROM = { owns_state = 1075 } } #Nantong
					1075 = { is_controlled_by_ROOT_owner_or_mutual_enemy = yes }
				}
			}
		}

		visible = {
			is_subject = no
		}

		targets = {
			326.OWNER #Hong Kong
			609.OWNER #Tianjin
			728.OWNER #Guangzhouwan
			729.OWNER #Macau
			743.OWNER #Shanghai
			744.OWNER #Qingdao
			745.OWNER #Dalian
			746.OWNER #Ningbo
			747.OWNER #Fuzhou
			801.OWNER #Shantou
			802.OWNER #Xiamen
			803.OWNER #Wenzhou
			996.OWNER #Weihaiwei
			1075.OWNER #Nantong
		}
		target_root_trigger = {
			has_country_flag = china_concession_decisions_unlocked
			is_subject = no
		}
		target_trigger = {
			FROM = {
				is_tag_in_china_area = no
				OR = {
					owns_state = 326 #Hong Kong
					owns_state = 609 #Tianjin
					owns_state = 728 #Guangzhouwan
					owns_state = 729 #Macau
					owns_state = 743 #Shanghai
					owns_state = 744 #Qingdao
					owns_state = 745 #Dalian
					owns_state = 746 #Ningbo
					owns_state = 747 #Fuzhou
					owns_state = 801 #Shantou
					owns_state = 802 #Xiamen
					owns_state = 803 #Wenzhou
					owns_state = 996 #Weihaiwei
					owns_state = 1075 #Nantong
				}
			}
			at_war_with_or_justifying_wargoal_against_FROM = no
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				tag = FNG
				is_in_faction_with = JAP
				FROM = { original_tag = JAP }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_request_return_of_concessions target: [From.GetName]"
			save_event_target_as = china
			FROM = {
				save_event_target_as = concession_holder
				if = {
					limit = { is_subject = yes }
					overlord = { country_event = china_events.200 }
				}
				else = {
					country_event = china_events.200
				}
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				every_state = {
					limit = {
						is_possible_legation_cities_state = yes
						OR = {
							is_owned_by = FROM
							owner = { has_subject = FROM } #for the tooltip
							owner = { is_subject_of = FROM }
						}
					}
					transfer_state_to = ROOT
				}
			}
			if = {
				limit = { can_declare_war_on = FROM }
				custom_effect_tooltip = if_they_refuse_tt
				effect_tooltip = {
					activate_targeted_decision = { decision = china_seize_concessions target = FROM }
				}
			}
		}
	}
	china_seize_concessions = {
		icon = generic_assassination

		allowed = { always = no } #activated by china_events.202 or china_events.205

		available = {
			NOT = { has_non_aggression_pact_with = FROM }
			if = {
				limit = { FROM = { is_subject = yes } }
				NOT = { has_non_aggression_pact_with = FROM.overlord }
			}
			if = {
				limit = { FROM = { is_in_faction = yes } }
				NOT = { has_non_aggression_pact_with = FROM.faction_leader }
			}
			if = {
				limit = { has_global_flag = JAP_defeated_by_china }
				if = {
					limit = { FROM = { owns_state = 326 } } #Hong Kong
					326 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 609 } } #Tianjin
					609 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 728 } } #Guangzhouwan
					728 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 729 } } #Macau
					729 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 743 } } #Shanghai
					743 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 744 } } #Qingdao
					744 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 745 } } #Dalian
					745 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 746 } } #Ningbo
					746 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 747 } } #Ningbo
					747 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 801 } } #Shantou
					801 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 802 } } #Xiamen
					802 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 803 } } #Wenzhou
					803 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 996 } } #Weihaiwei
					996 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
				if = {
					limit = { FROM = { owns_state = 1075 } } #Nantong
					1075 = { is_controlled_by_ROOT_owner_or_defeated_japan = yes }
				}
			}
			else = {
				if = {
					limit = { FROM = { owns_state = 326 } } #Hong Kong
					326 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 609 } } #Tianjin
					609 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 728 } } #Guangzhouwan
					728 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 729 } } #Macau
					729 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 743 } } #Shanghai
					743 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 744 } } #Qingdao
					744 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 745 } } #Dalian
					745 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 746 } } #Ningbo
					746 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 747 } } #Ningbo
					747 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 801 } } #Shantou
					801 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 802 } } #Xiamen
					802 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 803 } } #Wenzhou
					803 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 996 } } #Weihaiwei
					996 = { is_controlled_by_ROOT_or_owner = yes }
				}
				if = {
					limit = { FROM = { owns_state = 1075 } } #Nantong
					1075 = { is_controlled_by_ROOT_or_owner = yes }
				}
			}
		}

		cancel_trigger = {
			OR = {
				is_subject = yes
				NOT = { can_declare_war_on = FROM }
				has_non_aggression_pact_with = FROM
				if = {
					limit = { FROM = { is_subject = yes } }
					has_non_aggression_pact_with = FROM.overlord
				}
				else = {
					hidden_trigger = { always = no }
				}
				if = {
					limit = { FROM = { is_in_faction = yes } }
					has_non_aggression_pact_with = FROM.faction_leader
				}
				else = {
					hidden_trigger = { always = no }
				}
				FROM = {
					NOT = { owns_state = 326 } #Hong Kong
					NOT = { owns_state = 609 } #Tianjin
					NOT = { owns_state = 728 } #Guangzhouwan
					NOT = { owns_state = 729 } #Macau
					NOT = { owns_state = 743 } #Shanghai
					NOT = { owns_state = 744 } #Qingdao
					NOT = { owns_state = 745 } #Dalian
					NOT = { owns_state = 746 } #Ningbo
					NOT = { owns_state = 747 } #Fuzhou
					NOT = { owns_state = 801 } #Shantou
					NOT = { owns_state = 802 } #Xiamen
					NOT = { owns_state = 803 } #Wenzhou
					NOT = { owns_state = 996 } #Weihaiwei
					NOT = { owns_state = 1075 } #Nantong
				}
			}
		}

		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = @china_attack_decision_cost
		days_remove = @china_attack_decision_time
		fire_only_once = yes
		war_with_target_on_complete = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				country_has_any_active_threat = yes
			}
			modifier = {
				factor = 0
				FROM = { default_attack_AI_trigger = yes }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel china_seize_concessions target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_seize_concessions target: [From.GetName]"
			setup_decision_attack_AI = yes
			hidden_effect = {
				FROM = { incoming_war_notification_effect = yes }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_seize_concessions target: [From.GetName]"
			clear_decision_attack_AI = yes
			save_event_target_as = china
			FROM = {
				save_event_target_as = concession_holder
				country_event = china_events.210
				if = {
					limit = { is_subject = yes }
					effect_tooltip = { overlord = { country_event = china_events.210 } }
				}
			}
			effect_tooltip = {
				every_state = {
					limit = {
						OR = {
							AND = {
								is_owned_by = FROM
								is_core_china = yes
							}
							AND = {
								OR = {
									is_owned_by = FROM
									owner = { is_subject_of = FROM }
								}
								is_possible_legation_cities_state = yes
							}
						}
					}
					transfer_state_to = ROOT
				}
			}
			custom_effect_tooltip = maybe_war_tt
		}
	}
}

china_league_collapse_decisions = {
	# Missions
	china_control_nanjing = {
		icon = GFX_decision_shield
		allowed = {
			OR = {
				tag = ANQ
				tag = CHI
				tag = LEP
				tag = SHD
			}
		}
		activation = {
			has_war = yes
			OR = {
				has_idea = league_collapse_ANQ
				has_idea = league_collapse_SHD
				has_idea = league_collapse_CHI
				has_idea = league_collapse_LEP
			}
			controls_state = 613
		}
		available = {
			NOT = { controls_state = 613 } # Nanjing
		}
		visible = {
			has_war = yes
		}
		is_good = yes
		cancel_if_not_visible = yes
		days_mission_timeout = 25
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout china_control_nanjing"
			set_temp_variable = { change_league_war_morale_by = 5 }
			china_update_morale = yes

			custom_effect_tooltip = china_league_war_mission_loop
			hidden_effect = { activate_mission = china_control_nanjing }

			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 50
				producer = LEP
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_control_nanjing"
			set_temp_variable = { change_league_war_morale_by = -50 }
			china_update_morale = yes
			activate_mission = china_take_nanjing
		}
	}
	china_take_nanjing = {
		icon = GFX_decision_generic_ignite_civil_war
		allowed = {
			OR = {
				tag = ANQ
				tag = CHI
				tag = LEP
				tag = SHD
			}
		}
		activation = {
			has_war = yes
			OR = {
				has_idea = league_collapse_ANQ
				has_idea = league_collapse_SHD
				has_idea = league_collapse_CHI
				has_idea = league_collapse_LEP
			}
			NOT = { controls_state = 613 }
		}
		available = {
			controls_state = 613 # Nanjing
		}
		visible = {
			has_war = yes
		}
		is_good = no
		cancel_if_not_visible = yes
		days_mission_timeout = 25
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout china_take_nanjing"
			set_temp_variable = { change_league_war_morale_by = -8 }
			add_to_temp_variable = { change_league_war_morale_by = china_morale_collapse_rate }
			add_to_variable = { china_morale_collapse_rate = -1 }
			china_update_morale = yes
			custom_effect_tooltip = china_league_war_mission_loop
			hidden_effect = { activate_mission = china_take_nanjing }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_take_nanjing"
			set_temp_variable = { change_league_war_morale_by = 50 }
			china_update_morale = yes

			activate_mission = china_control_nanjing
		}
	}
	china_collapsing_morale = {
		icon = GFX_decision_eng_blackshirt_march

		allowed = { always = no }

		available = {
			check_variable = {
				china_league_war_morale > 29
				tooltip = china_check_morale_tt
			}
		}

		cancel_trigger = {
			NOT = {
				any_enemy_country = {
					has_dynamic_modifier = { modifier = china_morale_dm }
					is_neighbor_of = ROOT
				}
			}
		}

		is_good = no
		days_mission_timeout = 15

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout china_collapsing_morale"
			# Change Morale
			set_temp_variable = { change_league_war_morale_by = -10 }
			china_update_morale = yes

			custom_effect_tooltip = china_league_war_mission_loop
			hidden_effect = { activate_mission = china_collapsing_morale }

			# Army Defections
			country_event = lepwar.1

			# Collapsing Morale Idea
			if = {
				limit = { NOT = { has_idea = china_anti_stalemate_idea_2 } }
				add_ideas = china_anti_stalemate_idea_2
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_collapsing_morale"
			# Collapsing Morale Idea
			if = {
				limit = { has_idea = china_anti_stalemate_idea_2 }
				remove_ideas = china_anti_stalemate_idea_2
			}
		}
	}

	# Scavenge Equipment
	china_scavenge_jiangxi = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 1044
			controls_state = 1045
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.5
			}
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 5 }
		}
		custom_cost_text = china_five_morale

		highlight_states = {
			highlight_state_targets = { state = 1044 }
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}
		fire_only_once = yes
		days_remove = 15

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_scavenge_jiangxi"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -5 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_scavenge_jiangxi"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 600
				producer = LEP
			}
		}
	}
	china_scavenge_fujian = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 595
			controls_state = 1066
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.5
			}
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 5 }
		}
		custom_cost_text = china_five_morale

		highlight_states = {
			highlight_state_targets = { state = 595 }
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_scavenge_fujian"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -5 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_scavenge_fujian"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 800
				producer = LEP
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 100
				producer = LEP
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 100
				producer = LEP
			}
		}
	}
	china_scavenge_zhejiang = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 596
			controls_state = 1067
			controls_state = 1069
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.5
			}
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 5 }
		}
		custom_cost_text = china_five_morale

		highlight_states = {
			highlight_state_targets = { state = 596 }
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_scavenge_zhejiang"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -5 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_scavenge_zhejiang"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 800
				producer = LEP
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 100
				producer = LEP
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 100
				producer = LEP
			}
		}
	}
	china_scavenge_nanjing = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 613
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.5
			}
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 5 }
		}
		custom_cost_text = china_five_morale

		highlight_states = {
			highlight_state_targets = { state = 613 }
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_scavenge_nanjing"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -5 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_scavenge_nanjing"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 1300
				producer = LEP
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 300
				producer = LEP
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 300
				producer = LEP
			}
		}
	}
	china_scavenge_anhui = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 606
			controls_state = 1014
			controls_state = 1050
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.5
			}
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 5 }
		}
		custom_cost_text = china_five_morale

		highlight_states = {
			highlight_state_targets = { state = 606 }
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_scavenge_anhui"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -5 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_scavenge_anhui"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 600
				producer = LEP
			}
			set_temp_variable = { change_league_war_morale_by = -5 }
			china_update_morale = yes
		}
	}
	china_scavenge_jiangsu = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 598
			controls_state = 1047
			controls_state = 1075
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.5
			}
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 5 }
		}
		custom_cost_text = china_five_morale

		highlight_states = {
			highlight_state_targets = { state = 1047 }
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_scavenge_jiangsu"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -5 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_scavenge_jiangsu"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 800
				producer = LEP
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 100
				producer = LEP
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 100
				producer = LEP
			}
		}
	}
	china_scavenge_shandong = {
		icon = generic_prepare_civil_war
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 1064
			controls_state = 597
			controls_state = 1065
			stockpile_ratio = {
				archetype = infantry_equipment
				ratio < 0.5
			}
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 5 }
		}
		custom_cost_text = china_five_morale

		highlight_states = {
			highlight_state_targets = { state = 597 }
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_scavenge_shandong"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -5 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_scavenge_shandong"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 800
				producer = SHD
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 100
				producer = SHD
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 100
				producer = SHD
			}
		}
	}

	# Raise Men
	china_raise_men_in_jiangxi = {
		icon = GFX_decision_generic_military
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 1044
			controls_state = 1045
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 10 }
		}
		custom_cost_text = china_ten_morale

		highlight_states = {
			highlight_state_targets = { state = 1044 }
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		cancel_trigger = {
			OR = {
				NOT = {
					controls_state = 1044
					controls_state = 1045
				}
				has_global_flag = LEP_league_war_over
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_raise_men_in_jiangxi"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -10 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_raise_men_in_jiangxi"
			custom_effect_tooltip = china_mobilize_1_units_tt
			hidden_effect = {
				LEP_create_militia_template = yes
				random_controlled_state = {
					prioritize = { 1044 1045 }
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
				}
			}
		}
	}
	china_raise_men_in_fujian = {
		icon = GFX_decision_generic_military
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 595
			controls_state = 1066
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 10 }
		}
		custom_cost_text = china_ten_morale

		highlight_states = {
			highlight_state_targets = { state = 595 }
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		cancel_trigger = {
			OR = {
				NOT = {
					controls_state = 595
					controls_state = 1066
				}
				has_global_flag = LEP_league_war_over
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_raise_men_in_fujian"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -10 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_raise_men_in_fujian"
			custom_effect_tooltip = china_mobilize_2_units_tt
			hidden_effect = {
				LEP_create_militia_template = yes
				random_controlled_state = {
					prioritize = { 595 1066 }
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
				}
			}
		}
	}
	china_raise_men_in_zhejiang = {
		icon = GFX_decision_generic_military
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 596
			controls_state = 1067
			controls_state = 1069
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 10 }
		}
		custom_cost_text = china_ten_morale

		highlight_states = {
			highlight_state_targets = { state = 596 }
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		cancel_trigger = {
			OR = {
				NOT = {
					controls_state = 596
					controls_state = 1067
					controls_state = 1069
				}
				has_global_flag = LEP_league_war_over
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_raise_men_in_zhejiang"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -10 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_raise_men_in_zhejiang"
			custom_effect_tooltip = china_mobilize_2_units_tt
			hidden_effect = {
				LEP_create_militia_template = yes
				random_controlled_state = {
					prioritize = { 596 1067 1069 }
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
				}
			}
		}
	}
	china_raise_men_in_nanjing = {
		icon = GFX_decision_generic_military
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 613
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 10 }
		}
		custom_cost_text = china_ten_morale

		highlight_states = {
			highlight_state_targets = { state = 613 }
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 60 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		cancel_trigger = {
			OR = {
				NOT = {
					controls_state = 613
				}
				has_global_flag = LEP_league_war_over
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_raise_men_in_nanjing"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -10 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_raise_men_in_nanjing"
			custom_effect_tooltip = china_mobilize_3_units_tt
			hidden_effect = {
				LEP_create_militia_template = yes
				613 = {
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.2"
						owner = ROOT
						prioritize_location = 11913
						id = 1911
					}
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.2"
						owner = ROOT
						prioritize_location = 11913
						id = 1911
					}
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.2"
						owner = ROOT
						prioritize_location = 11913
						id = 1911
					}
				}
			}
		}
	}
	china_raise_men_in_anhui = {
		icon = GFX_decision_generic_military
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 606
			controls_state = 1014
			controls_state = 1050
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 10 }
		}
		custom_cost_text = china_ten_morale

		highlight_states = {
			highlight_state_targets = { state = 606 }
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		cancel_trigger = {
			OR = {
				NOT = {
					controls_state = 606
					controls_state = 1014
					controls_state = 1050
				}
				has_global_flag = LEP_league_war_over
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_raise_men_in_anhui"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -10 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_raise_men_in_anhui"
			custom_effect_tooltip = china_mobilize_1_units_tt
			hidden_effect = {
				LEP_create_militia_template = yes
				random_controlled_state = {
					prioritize = { 606 1014 1050 }
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
				}
			}
		}
	}
	china_raise_men_in_jiangsu = {
		icon = GFX_decision_generic_military
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 598
			controls_state = 1047
			controls_state = 1075
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 10 }
		}
		custom_cost_text = china_ten_morale

		highlight_states = {
			highlight_state_targets = { state = 1047 }
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		cancel_trigger = {
			OR = {
				NOT = {
					controls_state = 598
					controls_state = 1047
					controls_state = 1075
				}
				has_global_flag = LEP_league_war_over
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_raise_men_in_jiangsu"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -10 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_raise_men_in_jiangsu"
			custom_effect_tooltip = china_mobilize_2_units_tt
			hidden_effect = {
				LEP_create_militia_template = yes
				random_controlled_state = {
					prioritize = { 598 1047 1075 }
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
				}
			}
		}
	}
	china_raise_men_in_shandong = {
		icon = GFX_decision_generic_military
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
				tag = CHI
				tag = SHD
			}
		}
		available = {
			controls_state = 597
			controls_state = 1064
			controls_state = 1065
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 10 }
		}
		custom_cost_text = china_ten_morale

		highlight_states = {
			highlight_state_targets = { state = 597 }
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		cancel_trigger = {
			OR = {
				NOT = {
					controls_state = 597
					controls_state = 1064
					controls_state = 1065
				}
				has_global_flag = LEP_league_war_over
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_raise_men_in_shandong"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -10 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_raise_men_in_shandong"
			custom_effect_tooltip = china_mobilize_2_units_tt
			hidden_effect = {
				LEP_create_militia_template = yes
				random_controlled_state = {
					prioritize = { 597 1064 1065 }
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
					create_unit = {
						division = "division_template = \"League War Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
				}
			}
		}
	}

	# Foreign Aid
	china_appeal_for_japanese_support = {
		icon = GFX_decision_generic_agreement
		allowed = { tag = ANQ }
		visible = {
			china_is_aligned_with_fengtian = yes
		}
		available = {
			check_variable = {
				china_league_war_morale > 59
				tooltip = china_check_morale_tt
			}
		}
		ai_will_do = { factor = 100 }

		targets = { JAP }

		fire_only_once = yes
		cost = 20
		days_remove = 15

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_appeal_for_japanese_support"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 500
				producer = JAP
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 50
				producer = JAP
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 50
				producer = JAP
			}

			add_timed_idea = {
				idea = china_foreign_support
				days = 40
			}
		}
	}
	china_appeal_for_zhili_support = {
		icon = GFX_decision_generic_agreement
		allowed = {
			OR = {
				tag = LEP
				tag = ANQ
			}
		}
		visible = {
			china_is_aligned_with_zhili = yes
			QIE = { china_is_aligned_with_zhili = yes }
		}
		available = {
			check_variable = {
				china_league_war_morale > 59
				tooltip = china_check_morale_tt
			}
		}
		ai_will_do = { factor = 100 }

		targets = { QIE }

		fire_only_once = yes
		cost = 20
		days_remove = 15

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_appeal_for_zhili_support"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 500
				producer = QIE
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 50
				producer = QIE
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 50
				producer = QIE
			}

			add_timed_idea = {
				idea = china_foreign_support
				days = 40
			}
		}
	}
	china_appeal_for_german_support = {
		icon = GFX_decision_generic_agreement
		allowed = {
			tag = LEP
		}
		visible = {
			tag = LEP
		}
		available = {
			check_variable = {
				china_league_war_morale > 59
				tooltip = china_check_morale_tt
			}
		}
		ai_will_do = { factor = 100 }

		targets = { GER }

		fire_only_once = yes
		cost = 20
		days_remove = 15

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_appeal_for_german_support"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 500
				producer = GER
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 50
				producer = GER
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 50
				producer = GER
			}

			add_timed_idea = {
				idea = china_foreign_support
				days = 40
			}
		}
	}
	china_appeal_for_internationale_support = {
		icon = GFX_decision_generic_agreement
		allowed = {
			tag = CHI
		}
		visible = {
			tag = CHI
		}
		available = {
			check_variable = {
				china_league_war_morale > 59
				tooltip = china_check_morale_tt
			}
		}
		ai_will_do = { factor = 100 }

		targets = { INT }

		fire_only_once = yes
		cost = 20
		days_remove = 15

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_appeal_for_internationale_support"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 500
				producer = FRA
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 50
				producer = FRA
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 50
				producer = FRA
			}

			add_timed_idea = {
				idea = china_foreign_support
				days = 40
			}
		}
	}
	china_raise_nationalists = {
		icon = GFX_decision_lkmt_flag
		allowed = {
			tag = CHI
		}
		available = {
			capital_scope = { is_controlled_by = ROOT }
		}
		custom_cost_trigger = {
			check_variable = { china_league_war_morale > 10 }
		}
		custom_cost_text = china_ten_morale

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				check_variable = { china_league_war_morale < 65 }
			}
		}

		fire_only_once = yes
		days_remove = 15

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_raise_nationalists"
			hidden_effect = {
				set_temp_variable = { change_league_war_morale_by = -10 }
				china_update_morale = yes
			}
			if = {
				limit = {
					check_variable = { china_league_war_morale < 30 }
				}
				custom_effect_tooltip = china_morale_sink_danger
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_raise_nationalists"
			custom_effect_tooltip = china_mobilize_2_units_tt
			hidden_effect = {
				division_template = {
					name = "Chinese Nationalist Militia"
					division_names_group = CHYN_INF_01
					regiments = {
						irregular_infantry = { x = 0 y = 0 }
						irregular_infantry = { x = 0 y = 1 }
						irregular_infantry = { x = 0 y = 2 }
						irregular_infantry = { x = 0 y = 3 }
						irregular_infantry = { x = 1 y = 0 }
						irregular_infantry = { x = 1 y = 1 }
						irregular_infantry = { x = 1 y = 2 }
						irregular_infantry = { x = 1 y = 3 }
					}
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
				capital_scope = {
					create_unit = {
						division = "division_template = \"Chinese Nationalist Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
					create_unit = {
						division = "division_template = \"Chinese Nationalist Militia\" start_experience_factor = 0.4"
						owner = ROOT
						id = 1911
					}
				}
			}
		}
	}
}

china_army_decisions = {
	china_army_reform = {
		icon = generic_prepare_civil_war

		visible = { has_country_flag = china_has_poor_army }

		custom_cost_text = army_xp_100
		custom_cost_trigger = {
			has_army_experience > 99.99
		}

		days_remove = 200

		ai_will_do = { factor = 500 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_army_reform"
			hidden_effect = { army_experience = -100 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_army_reform"
			effect_tooltip = { china_army_reform_increase_step = yes }
			hidden_effect = { country_event = china_events.40 }
		}
	}
	china_lessons_of_war = {
		icon = generic_army_support

		custom_cost_text = army_xp_200
		custom_cost_trigger = {
			has_army_experience > 199.99
		}

		days_remove = 200
		fire_only_once = yes

		ai_will_do = { factor = 500 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_lessons_of_war"
			hidden_effect = { army_experience = -200 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_lessons_of_war"
			effect_tooltip = { china_army_reform_remove_officer_penalty = yes }
			hidden_effect = { country_event = china_events.41 }
		}
	}
	CHN_cleanse_army_corruption_decision = {
		icon = GFX_decision_generic_arrest

		visible = { check_variable = { CHN_military_disarray_fixes_needed_var > 0 } }

		cost = 50

		days_remove = 120
		fire_only_once = no

		ai_will_do = { factor = 500 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_cleanse_army_corruption_decision"
			subtract_from_variable = { CHN_military_disarray_fixes_needed_var = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_cleanse_army_corruption_decision"
			CHN_improve_military_disarray_effect = yes
		}
	}
	CHN_reorganise_military_units_decision = {
		icon = GFX_decision_soldierly_discipline

		visible = { check_variable = { CHN_military_disarray_fixes_needed_var > 0 } }

		custom_cost_text = CP_100
		custom_cost_trigger = {
			command_power > 99.99
		}

		days_remove = 120
		fire_only_once = no

		ai_will_do = { factor = 500 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_reorganise_military_units_decision"
			hidden_effect = { add_command_power = -100 }
			subtract_from_variable = { CHN_military_disarray_fixes_needed_var = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_reorganise_military_units_decision"
			CHN_improve_military_disarray_effect = yes
		}
	}
	CHN_disband_unreliable_units_decision = {
		icon = GFX_decision_eng_blackshirt_march

		visible = { check_variable = { CHN_military_disarray_fixes_needed_var > 0 } }

		custom_cost_text = war_support20
		custom_cost_trigger = {
			has_war_support > 0.19
		}

		days_remove = 120
		fire_only_once = no

		ai_will_do = { factor = 500 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_disband_unreliable_units_decision"
			hidden_effect = { add_war_support = -0.20 }
			subtract_from_variable = { CHN_military_disarray_fixes_needed_var = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_disband_unreliable_units_decision"
			CHN_improve_military_disarray_effect = yes
		}
	}
	CHN_purge_disloyal_officers_decision = {
		icon = GFX_decision_generic_police_action

		visible = { check_variable = { CHN_military_disarray_fixes_needed_var > 0 } }

		custom_cost_text = army_xp_35
		custom_cost_trigger = {
			has_army_experience > 34.99
		}

		days_remove = 120
		fire_only_once = no

		ai_will_do = { factor = 500 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_purge_disloyal_officers_decision"
			hidden_effect = { army_experience = -35 }
			subtract_from_variable = { CHN_military_disarray_fixes_needed_var = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_purge_disloyal_officers_decision"
			CHN_improve_military_disarray_effect = yes
		}
	}
}

prospect_for_resources = {
	ANQ_develop_huainan_steel_decision = {
		name = steel_huainan_find
		icon = steel
		allowed = { always = no }	# Activated by scripted effect

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes
		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_develop_huainan_steel_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_develop_huainan_steel_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1050 decision = ANQ_develop_huainan_steel_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	ANQ_develop_changsa_steel_decision = {
		name = steel_changsa_find
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except HNN

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes
		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_develop_changsa_steel_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_develop_changsa_steel_decision target: [From.GetName]"
			FROM = {
				set_state_flag = ANQ_changsa_steel_developed
				add_resource = {
					type = steel
					amount = 8
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 602 decision = ANQ_develop_changsa_steel_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	ANQ_develop_nanjing_steel_decision = {
		name = steel_nanjing_find
		icon = steel
		allowed = { always = no }	# Activated by scripted effect

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes
		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_develop_nanjing_steel_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_develop_nanjing_steel_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 6
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 613 decision = ANQ_develop_nanjing_steel_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	ANQ_develop_jinan_steel_decision = {
		name = steel_jinan_find
		icon = steel
		allowed = { always = no }	# Activated by scripted effect

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 0
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes
		cost = 25
		days_remove = 30
		state_target = yes
		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ANQ_develop_jinan_steel_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ANQ_develop_jinan_steel_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 2
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 597 decision = ANQ_develop_jinan_steel_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	FNG_Expand_the_Anshan_Mines = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except FNG/MAN

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete FNG_Expand_the_Anshan_Mines target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FNG_Expand_the_Anshan_Mines target: [From.GetName]"
			FROM = {
				set_state_flag = FNG_steel_mines_developed		# Needed for FNG/MAN focus bypasses
				add_resource = {
					type = steel
					amount = 20
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 716 decision = FNG_Expand_the_Anshan_Mines } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	MAN_Aluminium_Extraction = {
		icon = aluminium
		allowed = { always = no }	# Activated by scripted effect for everyone except FNG/MAN

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes
		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete MAN_Aluminium_Extraction target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove MAN_Aluminium_Extraction target: [From.GetName]"
			FROM = {
				set_state_flag = FNG_aluminium_mines_developed
				add_resource = {
					type = aluminium
					amount = 16
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 716 decision = MAN_Aluminium_Extraction } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	LEP_improved_tungsten_extraction = {
		icon = tungsten
		allowed = { always = no }	# Activated by scripted effect for everyone except LEP

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes
		cost = 25
		days_remove = 30
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete LEP_improved_tungsten_extraction target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_improved_tungsten_extraction target: [From.GetName]"
			FROM = {
				set_state_flag = LEP_tungsten_mines_developed
				add_resource = {
					type = tungsten
					amount = 18
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1012 decision = LEP_improved_tungsten_extraction } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	LEC_to_the_coal_fields = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except LEC

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete LEC_to_the_coal_fields target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEC_to_the_coal_fields target: [From.GetName]"
			FROM = {
				set_state_flag = LEC_coal_mines_developed
				add_resource = {
					type = steel
					amount = 8
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 609 decision = LEC_to_the_coal_fields } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	GXC_Fuguo_Coal_Mine = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except GXC

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes
		cost = 25
		days_remove = 60
		state_target = yes

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete GXC_Fuguo_Coal_Mine target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove GXC_Fuguo_Coal_Mine target: [From.GetName]"
			FROM = {
				set_state_flag = GXC_coal_mines_developed
				add_resource = {
					type = steel
					amount = 5
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 800 decision = GXC_Fuguo_Coal_Mine } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	QIE_develop_tangshan_steel_decision = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except QIE/SZC

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete QIE_develop_tangshan_steel_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove QIE_develop_tangshan_steel_decision target: [From.GetName]"
			FROM = {
				set_state_flag = QIE_steel_mines_developed
				add_resource = {
					type = steel
					amount = 8
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 614 decision = QIE_develop_tangshan_steel_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	QIE_develop_zhili_steel_decision = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except QIE/SZC

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete QIE_develop_zhili_steel_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove QIE_develop_zhili_steel_decision target: [From.GetName]"
			FROM = {
				set_state_flag = QIE_steel_mines_developed
				add_resource = {
					type = steel
					amount = 8
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1060 decision = QIE_develop_zhili_steel_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SHD_develop_jiangxi_tungsten_decision = {
		icon = tungsten
		allowed = { always = no }	# Activated by scripted effect for everyone except SHD

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 15
		days_remove = 45
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SHD_develop_jiangxi_tungsten_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SHD_develop_jiangxi_tungsten_decision target: [From.GetName]"
			FROM = {
				set_state_flag = SHD_tungsten_mines_developed
				add_resource = {
					type = tungsten
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1044 decision = SHD_develop_jiangxi_tungsten_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SHD_develop_fujian_aluminium_decision = {
		icon = aluminium
		allowed = { always = no }	# Activated by scripted effect for everyone except SHD

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 15
		days_remove = 45
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SHD_develop_fujian_aluminium_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SHD_develop_fujian_aluminium_decision target: [From.GetName]"
			FROM = {
				set_state_flag = SHD_aluminium_mines_developed
				add_resource = {
					type = aluminium
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1046 decision = SHD_develop_fujian_aluminium_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SHX_expand_coal_mines1_decision = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except SHX

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SHX_expand_coal_mines1_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SHX_expand_coal_mines1_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 6
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1072 decision = SHX_expand_coal_mines1_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SHX_expand_coal_mines2_decision = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except SHX

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SHX_expand_coal_mines2_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SHX_expand_coal_mines2_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1072 decision = SHX_expand_coal_mines2_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SHX_improve_metal_refining1_decision = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except SHX

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SHX_improve_metal_refining1_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SHX_improve_metal_refining1_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1072 decision = SHX_improve_metal_refining1_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SHX_improve_metal_refining2_decision = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except SHX

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SHX_improve_metal_refining2_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SHX_improve_metal_refining2_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 7
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 622 decision = SHX_improve_metal_refining2_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SHX_improve_metal_refining3_decision = {
		icon = tungsten
		allowed = { always = no }	# Activated by scripted effect for everyone except SHX

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SHX_improve_metal_refining3_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SHX_improve_metal_refining3_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = tungsten
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 622 decision = SHX_improve_metal_refining3_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SHX_further_resource_extraction1_decision = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except SHX

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 15
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SHX_further_resource_extraction1_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SHX_further_resource_extraction1_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 3
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1072 decision = SHX_further_resource_extraction1_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SHX_further_resource_extraction2_decision = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except SHX

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SHX_further_resource_extraction2_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SHX_further_resource_extraction2_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 6
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 1072 decision = SHX_further_resource_extraction2_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SZC_Jialing_Coal_Fields = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except SZC

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
			controls_state = FROM
		}

		visible = {
			owns_state = FROM
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SZC_Jialing_Coal_Fields target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Jialing_Coal_Fields target: [From.GetName]"
			add_resource = {
				type = steel
				amount = 4
				state = FROM
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					remove_targeted_decision = { decision = SZC_Jialing_Coal_Fields target = FROM }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SZC_The_Riches_Of_Xikang = {
		icon = steel

		allowed = { always = no }	# Activated by scripted effect for everyone except SZC

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
			controls_state = FROM
		}

		visible = {
			owns_state = FROM
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SZC_The_Riches_Of_Xikang target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_The_Riches_Of_Xikang target: [From.GetName]"
			add_resource = {
				type = steel
				amount = 10
				state = FROM
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					remove_targeted_decision = { decision = SZC_The_Riches_Of_Xikang target = FROM }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SZC_Extract_Natural_Gas_decision = {
		icon = oil
		allowed = { always = no }	# Activated by scripted effect for everyone except SZC

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
			controls_state = FROM
		}

		visible = {
			owns_state = FROM
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SZC_Extract_Natural_Gas_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Extract_Natural_Gas_decision target: [From.GetName]"
			add_resource = {
				type = oil
				amount = 4
				state = FROM
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					remove_targeted_decision = { decision = SZC_Extract_Natural_Gas_decision target = FROM }
				}
			}
		}
	}

	SIK_mineral_expedition = {
		icon = oil
		allowed = { always = no }	# Activated by scripted effect for everyone except SIK

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIK_mineral_expedition target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIK_mineral_expedition target: [From.GetName]"
			FROM = {
				set_state_flag = SIK_oil_resources_developed
				add_resource = {
					type = oil
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 617 decision = SIK_mineral_expedition } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SIK_open_mineral_mining = {
		icon = aluminium
		allowed = { always = no }	# Activated by scripted effect for everyone except SIK

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIK_open_mineral_mining target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIK_open_mineral_mining target: [From.GetName]"
			FROM = {
				set_state_flag = SIK_aluminium_mines_developed
				add_resource = {
					type = aluminium
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 287 decision = SIK_open_mineral_mining } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	SIK_northern_gold = {
		icon = tungsten
		allowed = { always = no }	# Activated by scripted effect for everyone except SIK

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete SIK_northern_gold target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SIK_northern_gold target: [From.GetName]"
			FROM = {
				set_state_flag = SIK_tungsten_mines_developed
				add_resource = {
					type = tungsten
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 618 decision = SIK_northern_gold } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	YUN_mining1_decision = {
		icon = steel
		allowed = { always = no }	# Activated by scripted effect for everyone except YUN

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete YUN_mining1_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove YUN_mining1_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = steel
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 816 decision = YUN_mining1_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	YUN_mining2_decision = {
		icon = aluminium
		allowed = { always = no }	# Activated by scripted effect for everyone except YUN

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete YUN_mining2_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove YUN_mining2_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = aluminium
					amount = 10
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 325 decision = YUN_mining2_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	YUN_mining3_decision = {
		icon = chromium
		allowed = { always = no }	# Activated by scripted effect for everyone except YUN

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete YUN_mining3_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove YUN_mining3_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = chromium
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 816 decision = YUN_mining3_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}

	YUN_mining4_decision = {
		icon = tungsten
		allowed = { always = no }	# Activated by scripted effect for everyone except YUN

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60
		state_target = yes
		modifier = {
			civilian_factory_use = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete YUN_mining4_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove YUN_mining4_decision target: [From.GetName]"
			FROM = {
				add_resource = {
					type = tungsten
					amount = 4
				}
			}
			hidden_effect = {
				for_each_scope_loop = {
					array = global.china_tags_array
					THIS = { remove_targeted_decision = { target = 816 decision = YUN_mining4_decision } }
				}
			}
		}

		ai_will_do = { factor = 100 }
	}
}

china_land_reform_decisions = {
	china_generic_land_reform_decision = {
		icon = GFX_decision_generic_agriculture

		allowed = { always = no } #activated by effect

		visible = {
			FROM = {
				is_owned_and_controlled_by = ROOT
				non_damaged_building_level = {
					building = infrastructure
					level > 2
				}
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 0
		}

		fire_only_once = yes
		state_target = yes
		cancel_if_not_visible = yes
		cost = China_land_reform_var
		days_remove = 200

		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		modifier = {
			civilian_factory_use = 1
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel china_generic_land_reform_decision target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete china_generic_land_reform_decision target: [From.GetName]"
			if = {
				limit = {
					FROM = {
						OR = {
							is_core_of = SIK
							is_core_of = TIB
							is_core_of = MON
						}
					}
				}
				add_stability = -0.025
				#add_compliance = 10 - idk if adding compliance after doing land reform would be too OP but it's an option
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove china_generic_land_reform_decision target: [From.GetName]"
			FROM = {
				if = {
					limit = { ROOT = { has_country_flag = CHI_moderate_land_reform_flag } }
					increase_state_category_by_one_level = yes
					ROOT = {
						add_popularity = {
							ideology = social_democrat
							popularity = 0.010
						}
						set_temp_variable = { ideology_change_var = 0.015 }
						change_ruling_party_popularity = yes
					}
				}
				else_if = {
					limit = { ROOT = { has_country_flag = CHI_radical_land_reform_flag } }
					increase_state_category_by_one_level = yes
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					ROOT = {
						if = {
							limit = { NOT = { has_government = radical_socialist } }
							add_popularity = {
								ideology = radical_socialist
								popularity = 0.010
							}
							set_temp_variable = { ideology_change_var = 0.015 }
							change_ruling_party_popularity = yes
						}
						else = {
							add_popularity = {
								ideology = radical_socialist
								popularity = 0.025
							}
						}
					}
				}
				else_if = {
					limit = { ROOT = { has_country_flag = CHI_total_land_reform_flag } }
					increase_state_category_by_one_level = yes
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					ROOT = {
						if = {
							limit = { NOT = { has_government = totalist } }
							add_popularity = {
								ideology = totalist
								popularity = 0.01
							}
							set_temp_variable = { ideology_change_var = 0.015 }
							change_ruling_party_popularity = yes
						}
						else = {
							add_popularity = {
								ideology = totalist
								popularity = 0.025
							}
						}
						add_stability = -0.03
					}
				}
				else_if = {
					limit = { ROOT = { has_country_flag = CHI_chinese_devolution_flag } }
					increase_state_category_by_one_level = yes
					add_extra_state_shared_building_slots = 1
					add_compliance = 20
					ROOT = {
						add_popularity = {
							ideology = social_conservative
							popularity = 0.003
						}
						add_popularity = {
							ideology = syndicalist
							popularity = 0.007
						}
						set_temp_variable = { ideology_change_var = 0.015 }
						change_ruling_party_popularity = yes
						add_stability = 0.01
					}
				}
				else = {
					increase_state_category_by_one_level = yes
				}
			}
		}
	}
}

china_mio_arsenal_integration_decision_category = {
	CHN_integrate_major_arsenal_decision = {
		allowed = { always = no } #Targeted decision made on start up
		icon = GFX_decision_ger_military_buildup
		visible = {
			owns_state = FROM
		}
		available = {
			controls_state = FROM
		}
		highlight_states = {
			highlight_state_targets = { state = FROM }
		}
		state_target = yes
		cancel_trigger = { NOT = { controls_state = FROM } }
		cancel_if_not_visible = yes

		fire_only_once = yes
		ai_will_do = { factor = 100 }
		cost = 50
		days_remove = 200
		modifier = {
			political_power_cost = 0.5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_integrate_major_arsenal_decision target: [From.GetName]"
		}
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel CHN_integrate_major_arsenal_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_integrate_major_arsenal_decision target: [From.GetName]"
			mio:CHN_small_arms_industry_organisation = {
				add_mio_funds = 500
			}
			mio:CHN_support_equipment_industry_organisation = {
				add_mio_funds = 500
			}
			mio:CHN_artillery_industry_organisation = {
				add_mio_funds = 500
			}
		}
	}

	CHN_integrate_minor_small_arms_arsenal_decision = {
		allowed = { always = no } #Targeted decision made on start up
		icon = GFX_decision_generic_prepare_civil_war
		visible = {
			owns_state = FROM
		}
		available = {
			controls_state = FROM
		}
		highlight_states = {
			highlight_state_targets = { state = FROM }
		}
		state_target = yes
		cancel_trigger = { NOT = { controls_state = FROM } }
		cancel_if_not_visible = yes

		fire_only_once = yes
		ai_will_do = { factor = 100 }
		cost = 25
		days_remove = 100
		modifier = {
			political_power_cost = 0.5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_integrate_minor_small_arms_arsenal_decision target: [From.GetName]"
		}
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel CHN_integrate_minor_small_arms_arsenal_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_integrate_minor_small_arms_arsenal_decision target: [From.GetName]"
			mio:CHN_small_arms_industry_organisation = {
				add_mio_funds = 500
			}
		}
	}
	CHN_integrate_minor_support_equipment_arsenal_decision = {
		allowed = { always = no } #Targeted decision made on start up
		icon = GFX_decision_support_equipment
		visible = {
			owns_state = FROM
		}
		available = {
			controls_state = FROM
		}
		highlight_states = {
			highlight_state_targets = { state = FROM }
		}
		state_target = yes
		cancel_trigger = { NOT = { controls_state = FROM } }
		cancel_if_not_visible = yes

		fire_only_once = yes
		ai_will_do = { factor = 100 }
		cost = 25
		days_remove = 100
		modifier = {
			political_power_cost = 0.5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_integrate_minor_support_equipment_arsenal_decision target: [From.GetName]"
		}
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel CHN_integrate_minor_support_equipment_arsenal_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_integrate_minor_support_equipment_arsenal_decision target: [From.GetName]"
			mio:CHN_support_equipment_industry_organisation = {
				add_mio_funds = 500
			}
		}
	}
	CHN_integrate_minor_artillery_arsenal_decision = {
		allowed = { always = no } #Targeted decision made on start up
		icon = GFX_decision_artillery
		visible = {
			owns_state = FROM
		}
		available = {
			controls_state = FROM
		}
		highlight_states = {
			highlight_state_targets = { state = FROM }
		}
		state_target = yes
		cancel_trigger = { NOT = { controls_state = FROM } }
		cancel_if_not_visible = yes

		fire_only_once = yes
		ai_will_do = { factor = 100 }
		cost = 25
		days_remove = 100
		modifier = {
			political_power_cost = 0.5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_integrate_minor_artillery_arsenal_decision target: [From.GetName]"
		}
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel CHN_integrate_minor_artillery_arsenal_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_integrate_minor_artillery_arsenal_decision target: [From.GetName]"
			mio:CHN_artillery_industry_organisation = {
				add_mio_funds = 500
			}
		}
	}

	CHN_integrate_major_dockyard_decision = {
		allowed = { always = no } #Targeted decision made on start up
		icon = GFX_decision_generic_merge_plant_ship
		visible = {
			owns_state = FROM
		}
		available = {
			controls_state = FROM
		}
		highlight_states = {
			highlight_state_targets = { state = FROM }
		}
		state_target = yes
		cancel_trigger = { NOT = { controls_state = FROM } }
		cancel_if_not_visible = yes

		fire_only_once = yes
		ai_will_do = { factor = 100 }
		cost = 25
		days_remove = 100
		modifier = {
			political_power_cost = 0.5
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CHN_integrate_major_dockyard_decision target: [From.GetName]"
		}
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel CHN_integrate_major_dockyard_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CHN_integrate_major_dockyard_decision target: [From.GetName]"
			mio:CHN_naval_industry_organisation = {
				add_mio_funds = 500
			}
		}
	}
}
